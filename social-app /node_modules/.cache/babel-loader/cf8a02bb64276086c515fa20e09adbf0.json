{"ast":null,"code":"import _defineProperty from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Form,Button,Image,Modal}from\"react-bootstrap\";import{connect}from\"react-redux\";import{chatAssetFileUploadStart,uploadAssetDetails}from\"../../store/actions/ChatAssetAction\";import{translate,t}from\"react-multi-lang\";var ChatAssetModal=function ChatAssetModal(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),chatAssetInputData=_useState2[0],setChatAssetInputData=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();if(Object.keys(chatAssetInputData).length>0&&chatAssetInputData.file){props.dispatch(chatAssetFileUploadStart({from_user_id:localStorage.getItem(\"userId\"),to_user_id:props.toUserId,file_type:props.fileType,message:chatAssetInputData.message?chatAssetInputData.message:\"\",amount:chatAssetInputData.amount?chatAssetInputData.amount:\"\",file:chatAssetInputData.file?chatAssetInputData.file:\"\"}));}else{alert(\"Please upload image and try again\");}setChatAssetInputData(_objectSpread(_objectSpread({},chatAssetInputData),{},{file:'',message:'',amount:''}));setImage(_objectSpread(_objectSpread({},image),{},{title:'',picture:''}));props.closeChatAssetUploadModal();};var _useState3=useState({picture:\"\"}),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var handleChangeImage=function handleChangeImage(event){if(event.currentTarget.type===\"file\"){setChatAssetInputData(_objectSpread(_objectSpread({},chatAssetInputData),{},_defineProperty({},event.currentTarget.name,event.currentTarget.files[0])));var reader=new FileReader();var file=event.currentTarget.files[0];setImage(_objectSpread(_objectSpread({},image),{},{title:event.currentTarget.files[0].name}));reader.onloadend=function(){if(props.fileType=='image'){setImage(_objectSpread(_objectSpread({},image),{},{picture:reader.result}));}};if(file){reader.readAsDataURL(file);}}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{className:\"modal-dialog-center sent-tip-modal\",size:\"md\",centered:true,show:props.chatAssetUpload,onHide:props.closeChatAssetUploadModal},props.chatAssetUpload===true?/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"Upload \",props.fileType)),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"floating-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"floating-label mb-5 chat-upload-sec\"},/*#__PURE__*/React.createElement(Button,{className:\"upload-chat-btn\"},/*#__PURE__*/React.createElement(Form.Group,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Form.Control,{id:\"fileupload_photo\",type:\"file\",accept:props.fileType==\"image\"?\"image/*\":props.fileType==\"video\"?\"video/*\":\"audio/*\",onChange:function onChange(event){return handleChangeImage(event);},name:\"file\"}),/*#__PURE__*/React.createElement(Form.Label,{id:\"attach_file_photo\",for:\"fileupload_photo\",className:\"chat-attach_file\",\"data-original-title\":\"null\"},\"Upload \",props.fileType))),image.picture!==\"\"?/*#__PURE__*/React.createElement(Image,{src:image.picture}):null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,image.title))),/*#__PURE__*/React.createElement(\"div\",{className:\"floating-label mb-5\"},/*#__PURE__*/React.createElement(\"input\",{className:\"floating-input\",type:\"text\",name:\"message\",placeholder:\"Message(optional)\",value:chatAssetInputData.message?chatAssetInputData.message:null,onChange:function onChange(event){return setChatAssetInputData(_objectSpread(_objectSpread({},chatAssetInputData),{},{message:event.currentTarget.value}));}}),/*#__PURE__*/React.createElement(\"span\",{className:\"highlight\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"default-label\"},\"Message (optional)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"floating-label mb-5\"},/*#__PURE__*/React.createElement(\"input\",{className:\"floating-input\",type:\"number\",min:\"0\",step:\"any\",name:\"amount\",value:chatAssetInputData.amount?chatAssetInputData.amount:null,onChange:function onChange(event){return setChatAssetInputData(_objectSpread(_objectSpread({},chatAssetInputData),{},{amount:event.currentTarget.value}));}}),/*#__PURE__*/React.createElement(\"span\",{className:\"highlight\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"default-label\"},\"PPV Amount(Optional)\")))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"btn btn-danger\",\"data-dismiss\":\"modal\",onClick:props.closeChatAssetUploadModal},t(\"cancel\")),/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"btn btn-success\",\"data-dismiss\":\"modal\",onClick:handleSubmit},t(\"send\")))):null));};var mapStateToPros=function mapStateToPros(state){return{chatAssetInputData:state.chatAsset.chatAssetInputData};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(ChatAssetModal));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/helper/ChatAssetModal.jsx"],"names":["React","useState","Form","Button","Image","Modal","connect","chatAssetFileUploadStart","uploadAssetDetails","translate","t","ChatAssetModal","props","chatAssetInputData","setChatAssetInputData","handleSubmit","event","preventDefault","Object","keys","length","file","dispatch","from_user_id","localStorage","getItem","to_user_id","toUserId","file_type","fileType","message","amount","alert","setImage","image","title","picture","closeChatAssetUploadModal","handleChangeImage","currentTarget","type","name","files","reader","FileReader","onloadend","result","readAsDataURL","chatAssetUpload","value","mapStateToPros","state","chatAsset","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Button, Image, Modal } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport {\n  chatAssetFileUploadStart,\n  uploadAssetDetails,\n} from \"../../store/actions/ChatAssetAction\";\nimport { translate, t } from \"react-multi-lang\";\n\nconst ChatAssetModal = (props) => {\n  const [chatAssetInputData, setChatAssetInputData] = useState({});\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (Object.keys(chatAssetInputData).length > 0 && chatAssetInputData.file) {\n      props.dispatch(\n        chatAssetFileUploadStart({\n          from_user_id: localStorage.getItem(\"userId\"),\n          to_user_id: props.toUserId,\n          file_type:props.fileType,\n          message: chatAssetInputData.message ? chatAssetInputData.message : \"\",\n          amount: chatAssetInputData.amount ? chatAssetInputData.amount : \"\",\n          file: chatAssetInputData.file ? chatAssetInputData.file : \"\",\n        })\n      );\n    } else {\n      alert(\"Please upload image and try again\");\n    }\n    setChatAssetInputData({\n      ...chatAssetInputData,\n      file: '',\n      message: '',\n      amount: '',\n    });\n    setImage({ ...image, title: '',picture:''});\n    props.closeChatAssetUploadModal();\n  };\n\n  const [image, setImage] = useState({\n    picture: \"\",\n  });\n\n  const handleChangeImage = (event) => {\n    if (event.currentTarget.type === \"file\") {\n      setChatAssetInputData({\n        ...chatAssetInputData,\n        [event.currentTarget.name]: event.currentTarget.files[0],\n      });\n      let reader = new FileReader();\n      let file = event.currentTarget.files[0];\n\n      setImage({ ...image, title: event.currentTarget.files[0].name});\n      reader.onloadend = () => {\n        if(props.fileType == 'image') {\n          setImage({ ...image, picture: reader.result });\n        }\n      };\n\n      if (file) {\n        reader.readAsDataURL(file);\n      }\n    }\n  };\n\n  return (\n    <>\n      <Modal\n        className=\"modal-dialog-center sent-tip-modal\"\n        size=\"md\"\n        centered\n        show={props.chatAssetUpload}\n        onHide={props.closeChatAssetUploadModal}\n      >\n        {props.chatAssetUpload === true ? (\n          <Form onSubmit={handleSubmit}>\n            <Modal.Header closeButton>\n              <Modal.Title>Upload {props.fileType}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <div className=\"floating-form\">\n                <div className=\"floating-label mb-5 chat-upload-sec\">\n                  <Button className=\"upload-chat-btn\">\n                    <Form.Group className=\"mb-0\">\n                      <Form.Control\n                        id=\"fileupload_photo\"\n                        type=\"file\"\n                        accept={\n                          props.fileType == \"image\" ? \"image/*\" : props.fileType == \"video\" ? \"video/*\" : \"audio/*\"\n                        }\n                        onChange={(event) => handleChangeImage(event)}\n                        name=\"file\"\n                      />\n                      <Form.Label\n                        id=\"attach_file_photo\"\n                        for=\"fileupload_photo\"\n                        className=\"chat-attach_file\"\n                        data-original-title=\"null\"\n                      >\n                        Upload {props.fileType}\n                      </Form.Label>\n                    </Form.Group>\n                  </Button>\n                  {image.picture !== \"\" ? <Image src={image.picture} /> : null}\n                  <div><h4>{image.title}</h4></div>\n                  \n                </div>\n                <div className=\"floating-label mb-5\">\n                  <input\n                    className=\"floating-input\"\n                    type=\"text\"\n                    name=\"message\"\n                    placeholder=\"Message(optional)\"\n                    value={\n                      chatAssetInputData.message\n                        ? chatAssetInputData.message\n                        : null\n                    }\n                    onChange={(event) =>\n                      setChatAssetInputData({\n                        ...chatAssetInputData,\n                        message: event.currentTarget.value,\n                      })\n                    }\n                  />\n                  <span className=\"highlight\"></span>\n                  <label className=\"default-label\">Message (optional)</label>\n                </div>\n                <div className=\"floating-label mb-5\">\n                  <input\n                    className=\"floating-input\"\n                    type=\"number\"\n                    min=\"0\"\n                    step=\"any\"\n                    name=\"amount\"\n                    value={\n                      chatAssetInputData.amount\n                        ? chatAssetInputData.amount\n                        : null\n                    }\n                    onChange={(event) =>\n                      setChatAssetInputData({\n                        ...chatAssetInputData,\n                        amount: event.currentTarget.value,\n                      })\n                    }\n                  />\n                  <span className=\"highlight\"></span>\n                  <label className=\"default-label\">PPV Amount(Optional)</label>\n                </div>\n              </div>\n            </Modal.Body>\n            <Modal.Footer>\n              <Button\n                type=\"button\"\n                className=\"btn btn-danger\"\n                data-dismiss=\"modal\"\n                onClick={props.closeChatAssetUploadModal}\n              >\n                {t(\"cancel\")}\n              </Button>\n              <Button\n                type=\"button\"\n                className=\"btn btn-success\"\n                data-dismiss=\"modal\"\n                onClick={handleSubmit}\n              >\n                {t(\"send\")}\n              </Button>\n            </Modal.Footer>\n          </Form>\n        ) : null}\n      </Modal>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  chatAssetInputData: state.chatAsset.chatAssetInputData,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(ChatAssetModal));"]},"metadata":{},"sourceType":"module"}