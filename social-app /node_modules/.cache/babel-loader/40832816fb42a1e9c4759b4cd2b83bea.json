{"ast":null,"code":"import _regeneratorRuntime from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(fetchChatUserAPI),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(fetchChatMessageAPI),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(fetchMoreDataStartAPI),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(saveChatUserAPI),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(pageSaga);import{call,select,put,takeLatest,all}from\"redux-saga/effects\";import api from\"../../Environment\";import{createNotification}from\"react-redux-notify\";import{getSuccessNotificationMessage,getErrorNotificationMessage}from\"../../components/helper/NotificationMessage\";import{fetchChatMessageFailure,fetchChatMessageStart,fetchChatMessageSuccess,fetchChatUsersFailure,fetchChatUsersSuccess,saveChatUserFailure,saveChatUserStart,saveChatUserSuccess,fetchChatMoreDataSucess}from\"../actions/ChatAction\";import{FETCH_CHAT_MESSAGE_START,FETCH_CHAT_USERS_START,SAVE_CHAT_USERS_START,ADD_MESSAGE_CONTENT,ADD_MESSAGE_CONTENT_START}from\"../actions/ActionConstant\";import{checkLogoutStatus}from\"../actions/ErrorAction\";function fetchChatUserAPI(){var inputData,response,notificationMessage,_notificationMessage;return _regeneratorRuntime.wrap(function fetchChatUserAPI$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return select(function(state){return state.chat.chatUsers.inputData;});case 3:inputData=_context.sent;console.log('inputData',inputData=='',inputData);_context.next=7;return api.postMethod(\"chat_users\",inputData);case 7:response=_context.sent;if(!response.data.success){_context.next=16;break;}_context.next=11;return put(fetchChatUsersSuccess(response.data.data));case 11:if(!(response.data.data.users.length>0&&inputData.search_key=='')){_context.next=14;break;}_context.next=14;return put(fetchChatMessageStart({to_user_id:response.data.data.users[0].to_user_id,from_user_id:response.data.data.users[0].from_user_id}));case 14:_context.next=23;break;case 16:_context.next=18;return put(fetchChatUsersFailure(response.data.error));case 18:notificationMessage=getErrorNotificationMessage(response.data.error);_context.next=21;return put(checkLogoutStatus(response.data));case 21:_context.next=23;return put(createNotification(notificationMessage));case 23:_context.next=32;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](0);_context.next=29;return put(fetchChatUsersFailure(_context.t0));case 29:_notificationMessage=getErrorNotificationMessage(_context.t0.message);_context.next=32;return put(createNotification(_notificationMessage));case 32:case\"end\":return _context.stop();}}},_marked,null,[[0,25]]);}function fetchChatMessageAPI(){var inputData,response,notificationMessage,_notificationMessage2;return _regeneratorRuntime.wrap(function fetchChatMessageAPI$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return select(function(state){return state.chat.messages.inputData;});case 3:inputData=_context2.sent;_context2.next=6;return api.postMethod(\"chat_messages\",inputData);case 6:response=_context2.sent;if(!response.data.success){_context2.next=12;break;}_context2.next=10;return put(fetchChatMessageSuccess(response.data.data));case 10:_context2.next=19;break;case 12:_context2.next=14;return put(fetchChatMessageFailure(response.data.error));case 14:notificationMessage=getErrorNotificationMessage(response.data.error);_context2.next=17;return put(checkLogoutStatus(response.data));case 17:_context2.next=19;return put(createNotification(notificationMessage));case 19:_context2.next=28;break;case 21:_context2.prev=21;_context2.t0=_context2[\"catch\"](0);_context2.next=25;return put(fetchChatMessageFailure(_context2.t0));case 25:_notificationMessage2=getErrorNotificationMessage(_context2.t0.message);_context2.next=28;return put(createNotification(_notificationMessage2));case 28:case\"end\":return _context2.stop();}}},_marked2,null,[[0,21]]);}function fetchMoreDataStartAPI(){var inputData,response,notificationMessage;return _regeneratorRuntime.wrap(function fetchMoreDataStartAPI$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return select(function(state){return state.chat.messages.inputData;});case 3:inputData=_context3.sent;_context3.next=6;return api.postMethod(\"chat_messages\",inputData);case 6:response=_context3.sent;if(!response.data.success){_context3.next=10;break;}_context3.next=10;return put(fetchChatMoreDataSucess(response.data.data));case 10:_context3.next=19;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);_context3.next=16;return put(fetchChatMessageFailure(_context3.t0));case 16:notificationMessage=getErrorNotificationMessage(_context3.t0.message);_context3.next=19;return put(createNotification(notificationMessage));case 19:case\"end\":return _context3.stop();}}},_marked3,null,[[0,12]]);}function saveChatUserAPI(){var inputData,response,notificationMessage,_notificationMessage3;return _regeneratorRuntime.wrap(function saveChatUserAPI$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return select(function(state){return state.chat.saveChatUser.inputData;});case 3:inputData=_context4.sent;_context4.next=6;return api.postMethod(\"chat_users_save\",inputData);case 6:response=_context4.sent;if(!response.data.success){_context4.next=13;break;}_context4.next=10;return put(saveChatUserSuccess(response.data.data));case 10:window.location.assign(\"/inbox\");_context4.next=20;break;case 13:_context4.next=15;return put(saveChatUserFailure(response.data.error));case 15:notificationMessage=getErrorNotificationMessage(response.data.error);_context4.next=18;return put(checkLogoutStatus(response.data));case 18:_context4.next=20;return put(createNotification(notificationMessage));case 20:_context4.next=29;break;case 22:_context4.prev=22;_context4.t0=_context4[\"catch\"](0);_context4.next=26;return put(saveChatUserFailure(_context4.t0));case 26:_notificationMessage3=getErrorNotificationMessage(_context4.t0.message);_context4.next=29;return put(createNotification(_notificationMessage3));case 29:case\"end\":return _context4.stop();}}},_marked4,null,[[0,22]]);}export default function pageSaga(){return _regeneratorRuntime.wrap(function pageSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.t0=all;_context5.next=3;return takeLatest(FETCH_CHAT_USERS_START,fetchChatUserAPI);case 3:_context5.t1=_context5.sent;_context5.t2=[_context5.t1];_context5.next=7;return(0,_context5.t0)(_context5.t2);case 7:_context5.t3=all;_context5.next=10;return takeLatest(FETCH_CHAT_MESSAGE_START,fetchChatMessageAPI);case 10:_context5.t4=_context5.sent;_context5.t5=[_context5.t4];_context5.next=14;return(0,_context5.t3)(_context5.t5);case 14:_context5.t6=all;_context5.next=17;return takeLatest(SAVE_CHAT_USERS_START,saveChatUserAPI);case 17:_context5.t7=_context5.sent;_context5.t8=[_context5.t7];_context5.next=21;return(0,_context5.t6)(_context5.t8);case 21:_context5.t9=all;_context5.next=24;return takeLatest(ADD_MESSAGE_CONTENT_START,fetchMoreDataStartAPI);case 24:_context5.t10=_context5.sent;_context5.t11=[_context5.t10];_context5.next=28;return(0,_context5.t9)(_context5.t11);case 28:case\"end\":return _context5.stop();}}},_marked5);}","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/store/sagas/ChatSaga.jsx"],"names":["fetchChatUserAPI","fetchChatMessageAPI","fetchMoreDataStartAPI","saveChatUserAPI","pageSaga","call","select","put","takeLatest","all","api","createNotification","getSuccessNotificationMessage","getErrorNotificationMessage","fetchChatMessageFailure","fetchChatMessageStart","fetchChatMessageSuccess","fetchChatUsersFailure","fetchChatUsersSuccess","saveChatUserFailure","saveChatUserStart","saveChatUserSuccess","fetchChatMoreDataSucess","FETCH_CHAT_MESSAGE_START","FETCH_CHAT_USERS_START","SAVE_CHAT_USERS_START","ADD_MESSAGE_CONTENT","ADD_MESSAGE_CONTENT_START","checkLogoutStatus","state","chat","chatUsers","inputData","console","log","postMethod","response","data","success","users","length","search_key","to_user_id","from_user_id","error","notificationMessage","message","messages","saveChatUser","window","location","assign"],"mappings":"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","sourcesContent":["import { call, select, put, takeLatest, all } from \"redux-saga/effects\";\nimport api from \"../../Environment\";\nimport { createNotification } from \"react-redux-notify\";\nimport {\n  getSuccessNotificationMessage,\n  getErrorNotificationMessage,\n} from \"../../components/helper/NotificationMessage\";\nimport {\n  fetchChatMessageFailure,\n  fetchChatMessageStart,\n  fetchChatMessageSuccess,\n  fetchChatUsersFailure,\n  fetchChatUsersSuccess,\n  saveChatUserFailure,\n  saveChatUserStart,\n  saveChatUserSuccess,\n  fetchChatMoreDataSucess,\n} from \"../actions/ChatAction\";\nimport {\n  FETCH_CHAT_MESSAGE_START,\n  FETCH_CHAT_USERS_START,\n  SAVE_CHAT_USERS_START,\n  ADD_MESSAGE_CONTENT,\n  ADD_MESSAGE_CONTENT_START,\n} from \"../actions/ActionConstant\";\n\nimport {\n  checkLogoutStatus,\n} from \"../actions/ErrorAction\";\n\nfunction* fetchChatUserAPI() {\n  try {\n    const inputData = yield select((state) => state.chat.chatUsers.inputData);\n    console.log('inputData', inputData  == '', inputData);\n    const response = yield api.postMethod(\"chat_users\", inputData);\n    if (response.data.success) {\n      yield put(fetchChatUsersSuccess(response.data.data));\n      if (response.data.data.users.length > 0 && inputData.search_key == '')\n        yield put(\n          fetchChatMessageStart({\n            to_user_id: response.data.data.users[0].to_user_id,\n            from_user_id: response.data.data.users[0].from_user_id,\n          })\n        );\n    } else {\n      yield put(fetchChatUsersFailure(response.data.error));\n      const notificationMessage = getErrorNotificationMessage(\n        response.data.error\n      );\n      yield put(checkLogoutStatus(response.data));\n      yield put(createNotification(notificationMessage));\n    }\n  } catch (error) {\n    yield put(fetchChatUsersFailure(error));\n    const notificationMessage = getErrorNotificationMessage(error.message);\n    yield put(createNotification(notificationMessage));\n  }\n}\n\nfunction* fetchChatMessageAPI() {\n  try {\n    const inputData = yield select((state) => state.chat.messages.inputData);\n    const response = yield api.postMethod(\"chat_messages\", inputData);\n    if (response.data.success) {\n      yield put(fetchChatMessageSuccess(response.data.data));\n    } else {\n      yield put(fetchChatMessageFailure(response.data.error));\n      const notificationMessage = getErrorNotificationMessage(\n        response.data.error\n      );\n      yield put(checkLogoutStatus(response.data));\n      yield put(createNotification(notificationMessage));\n    }\n  } catch (error) {\n    yield put(fetchChatMessageFailure(error));\n    const notificationMessage = getErrorNotificationMessage(error.message);\n    yield put(createNotification(notificationMessage));\n  }\n}\n\nfunction* fetchMoreDataStartAPI() {\n  try {\n    const inputData = yield select((state) => state.chat.messages.inputData);\n    const response = yield api.postMethod(\"chat_messages\", inputData);\n    if (response.data.success) {\n      yield put(fetchChatMoreDataSucess(response.data.data));\n    }\n  } catch (error) {\n    yield put(fetchChatMessageFailure(error));\n    const notificationMessage = getErrorNotificationMessage(error.message);\n    yield put(createNotification(notificationMessage));\n  }\n}\n\nfunction* saveChatUserAPI() {\n  try {\n    const inputData = yield select(\n      (state) => state.chat.saveChatUser.inputData\n    );\n    const response = yield api.postMethod(\"chat_users_save\", inputData);\n    if (response.data.success) {\n      yield put(saveChatUserSuccess(response.data.data));\n      window.location.assign(\"/inbox\");\n\n    } else {\n      yield put(saveChatUserFailure(response.data.error));\n      const notificationMessage = getErrorNotificationMessage(\n        response.data.error\n      );\n      yield put(checkLogoutStatus(response.data));\n      yield put(createNotification(notificationMessage));\n    }\n  } catch (error) {\n    yield put(saveChatUserFailure(error));\n    const notificationMessage = getErrorNotificationMessage(error.message);\n    yield put(createNotification(notificationMessage));\n  }\n}\n\nexport default function* pageSaga() {\n  yield all([yield takeLatest(FETCH_CHAT_USERS_START, fetchChatUserAPI)]);\n  yield all([yield takeLatest(FETCH_CHAT_MESSAGE_START, fetchChatMessageAPI)]);\n  yield all([yield takeLatest(SAVE_CHAT_USERS_START, saveChatUserAPI)]);\n  yield all([yield takeLatest(ADD_MESSAGE_CONTENT_START, fetchMoreDataStartAPI)]);\n}\n"]},"metadata":{},"sourceType":"module"}