{"ast":null,"code":"import _objectSpread from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Modal,Container,Row,Col,Button,Form,Image,Media}from\"react-bootstrap\";import\"./Product.css\";import{Link,useParams}from\"react-router-dom\";import{connect}from\"react-redux\";import{translate,t}from\"react-multi-lang\";import ProductHeader from\"./ProductHeader\";import{fetchUserProductPicturesStart,userProductPicturesSaveStart,userProductPicturesDeleteStart}from\"../../../store/actions/ProductsAction\";import NoDataFound from\"../../NoDataFound/NoDataFound\";var ProductGallery=function ProductGallery(props){var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),galleryImages=_useState2[0],setGalleryImages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),skipInitialRender=_useState4[0],setSkipInitialRender=_useState4[1];var handleChange=function handleChange(event){var fileReader=new FileReader();var file=event.currentTarget.files[0];fileReader.onloadend=function(){setGalleryImages(_objectSpread(_objectSpread({},galleryImages),{},{picture:file,previewImage:fileReader.result}));};if(file){fileReader.readAsDataURL(file);}};var handleSubmit=function handleSubmit(event){event.preventDefault();props.dispatch(userProductPicturesSaveStart({user_product_id:id,picture:galleryImages.picture}));};useEffect(function(){props.dispatch(fetchUserProductPicturesStart({user_product_id:id}));setSkipInitialRender(true);},[]);useEffect(function(){if(!props.productPicturesSave.loading&&skipInitialRender){setGalleryImages(null);props.dispatch(fetchUserProductPicturesStart({user_product_id:id}));}},[props.productPicturesSave.data]);var deleteGalleryImage=function deleteGalleryImage(id){props.dispatch(userProductPicturesDeleteStart({user_product_picture_id:id}));};useEffect(function(){if(!props.productPicturesDelete.loading&&skipInitialRender){props.dispatch(fetchUserProductPicturesStart({user_product_id:id}));}},[props.productPicturesDelete.data]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"add-product-sec\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"div\",{className:\"ecom-navbar\"},/*#__PURE__*/React.createElement(ProductHeader,null)),/*#__PURE__*/React.createElement(\"h2\",null,t(\"add_product\")),/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(event){return handleSubmit(event);},className:\"add-product-form\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(\"div\",{className:\"add-product-upload-file-sec border-right-divider\"},/*#__PURE__*/React.createElement(Form.Label,null,t(\"select_image\")),/*#__PURE__*/React.createElement(Form.Group,{id:\"file-upload-form\",className:\"uploader\"},/*#__PURE__*/React.createElement(Form.File,{id:\"file-upload\",name:\"picture\",accept:\"image/*\",onChange:function onChange(event){handleChange(event);}}),/*#__PURE__*/React.createElement(\"label\",{for:\"file-upload\",id:\"file-drag\"},/*#__PURE__*/React.createElement(\"div\",{id:\"start\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-download\",\"aria-hidden\":\"true\"}),/*#__PURE__*/React.createElement(\"div\",null,t(\"select_a_image\"))))),galleryImages!=null&&galleryImages.previewImage&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:galleryImages.previewImage,className:\"gallery-preview-image\",alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",className:\"add-product-btn\",disabled:props.productPicturesSave.buttonDisable?true:galleryImages!=null?false:true},props.productPicturesSave.loadingButtonContent!=null?props.productPicturesSave.loadingButtonContent:\"\".concat(t(\"submit\")))))),/*#__PURE__*/React.createElement(Col,{md:6},props.productPictures.loading?\"Loading...\":props.productPictures.data.user_product_pictures.length>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"product-gallery-grid\"},props.productPictures.data.user_product_pictures.map(function(image,index){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"image-wrapper\",key:index},/*#__PURE__*/React.createElement(\"img\",{src:image.picture,alt:\"\"}),/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"gallery-delete text-danger\",onClick:function onClick(){return deleteGalleryImage(image.user_product_picture_id);}},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"})))));}))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NoDataFound,null))))))));};var mapStateToPros=function mapStateToPros(state){return{productPictures:state.userProducts.productPictures,productPicturesSave:state.userProducts.productPicturesSave,productPicturesDelete:state.userProducts.productPicturesDelete};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(ProductGallery));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/Ecom/Product/ProductGallery.jsx"],"names":["React","useState","useEffect","Modal","Container","Row","Col","Button","Form","Image","Media","Link","useParams","connect","translate","t","ProductHeader","fetchUserProductPicturesStart","userProductPicturesSaveStart","userProductPicturesDeleteStart","NoDataFound","ProductGallery","props","id","galleryImages","setGalleryImages","skipInitialRender","setSkipInitialRender","handleChange","event","fileReader","FileReader","file","currentTarget","files","onloadend","picture","previewImage","result","readAsDataURL","handleSubmit","preventDefault","dispatch","user_product_id","productPicturesSave","loading","data","deleteGalleryImage","user_product_picture_id","productPicturesDelete","buttonDisable","loadingButtonContent","productPictures","user_product_pictures","length","map","image","index","mapStateToPros","state","userProducts","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Modal,\n  Container,\n  Row,\n  Col,\n  Button,\n  Form,\n  Image,\n  Media,\n} from \"react-bootstrap\";\nimport \"./Product.css\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport ProductHeader from \"./ProductHeader\";\nimport {\n  fetchUserProductPicturesStart,\n  userProductPicturesSaveStart,\n  userProductPicturesDeleteStart\n} from \"../../../store/actions/ProductsAction\";\nimport NoDataFound from \"../../NoDataFound/NoDataFound\";\n\nconst ProductGallery = (props) => {\n  const { id } = useParams();\n\n  const [galleryImages, setGalleryImages] = useState(null);\n\n  const [skipInitialRender, setSkipInitialRender] = useState(false);\n\n  const handleChange = (event) => {\n    const fileReader = new FileReader();\n\n    let file = event.currentTarget.files[0];\n\n    fileReader.onloadend = () => {\n      setGalleryImages({\n        ...galleryImages,\n        picture: file,\n        previewImage: fileReader.result,\n      });\n    };\n    if (file) {\n      fileReader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    props.dispatch(\n      userProductPicturesSaveStart({\n        user_product_id: id,\n        picture: galleryImages.picture,\n      })\n    );\n  };\n\n  useEffect(() => {\n    props.dispatch(fetchUserProductPicturesStart({ user_product_id: id }));\n    setSkipInitialRender(true)\n  }, []);\n\n  useEffect(() => {\n    if (!props.productPicturesSave.loading && skipInitialRender) {\n      setGalleryImages(null);\n      props.dispatch(fetchUserProductPicturesStart({ user_product_id: id }));\n    }\n  }, [props.productPicturesSave.data]);\n\n  const deleteGalleryImage = (id) => {\n    props.dispatch(userProductPicturesDeleteStart({user_product_picture_id : id}))\n  }\n\n  useEffect(() => {\n    if (!props.productPicturesDelete.loading && skipInitialRender) {\n      props.dispatch(fetchUserProductPicturesStart({ user_product_id: id }));\n    }\n  }, [props.productPicturesDelete.data]);\n\n  return (\n    <>\n      <div className=\"add-product-sec\">\n        <Container>\n          <div className=\"ecom-navbar\">\n            <ProductHeader />\n          </div>\n          <h2>{t(\"add_product\")}</h2>\n          <Form\n            onSubmit={(event) => handleSubmit(event)}\n            className=\"add-product-form\"\n          >\n            <Row>\n              <Col md={6}>\n                <div className=\"add-product-upload-file-sec border-right-divider\">\n                  <Form.Label>{t(\"select_image\")}</Form.Label>\n                  <Form.Group id=\"file-upload-form\" className=\"uploader\">\n                    <Form.File\n                      id=\"file-upload\"\n                      name=\"picture\"\n                      accept=\"image/*\"\n                      onChange={(event) => {\n                        handleChange(event);\n                      }}\n                    />\n                    <label for=\"file-upload\" id=\"file-drag\">\n                      <div id=\"start\">\n                        <i className=\"fa fa-download\" aria-hidden=\"true\"></i>\n                        <div>{t(\"select_a_image\")}</div>\n                      </div>\n                    </label>\n                  </Form.Group>\n                  {galleryImages != null && galleryImages.previewImage && (\n                    <div>\n                      <img\n                        src={galleryImages.previewImage}\n                        className=\"gallery-preview-image\"\n                        alt=\"\"\n                      />\n                    </div>\n                  )}\n                  <div className=\"text-center\">\n                    <Button\n                      type=\"submit\"\n                      className=\"add-product-btn\"\n                      disabled={\n                        props.productPicturesSave.buttonDisable\n                          ? true\n                          : galleryImages != null\n                          ? false\n                          : true\n                      }\n                    >\n                      {props.productPicturesSave.loadingButtonContent != null\n                        ? props.productPicturesSave.loadingButtonContent\n                        : `${t(\"submit\")}`}\n                    </Button>\n                  </div>\n                </div>\n              </Col>\n              <Col md={6}>\n                {props.productPictures.loading ? (\n                  \"Loading...\"\n                ) : props.productPictures.data.user_product_pictures.length >\n                  0 ? (\n                  <>\n                    <div className=\"product-gallery-grid\">\n                      {props.productPictures.data.user_product_pictures.map(\n                        (image, index) => (\n                          <>\n                            <div className=\"image-wrapper\" key={index}>\n                              <img src={image.picture} alt=\"\" />\n                              <Button\n                                type=\"button\"\n                                className=\"gallery-delete text-danger\"\n                                onClick={() => deleteGalleryImage(image.user_product_picture_id)}\n                              >\n                                <span>\n                                <i className=\"fas fa-trash\"></i>\n                                </span>\n                              </Button>\n                            </div>\n                          </>\n                        )\n                      )}\n                    </div>\n                  </>\n                ) : (\n                  <div>\n                    <NoDataFound></NoDataFound>\n                  </div>\n                )}\n              </Col>\n            </Row>\n          </Form>\n        </Container>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  productPictures: state.userProducts.productPictures,\n  productPicturesSave: state.userProducts.productPicturesSave,\n  productPicturesDelete : state.userProducts.productPicturesDelete\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(ProductGallery));\n"]},"metadata":{},"sourceType":"module"}