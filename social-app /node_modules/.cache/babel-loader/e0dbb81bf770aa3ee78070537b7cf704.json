{"ast":null,"code":"import _defineProperty from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Container,Row,Col,Form,Button,Image}from\"react-bootstrap\";import\"./Ecom.css\";import{Link}from\"react-router-dom\";import{fetchCartListStart,removeCartDetailsStart,fetchDeliveryAddressStart,ordersPaymentByWalletStart,ordersPaymentByCardStart,ordersPaymentByPaypalStart}from\"../../store/actions/ProductsAction\";import{connect}from\"react-redux\";import NoDataFound from\"../NoDataFound/NoDataFound\";import configuration from\"react-global-configuration\";import{translate,t}from\"react-multi-lang\";import{fetchWalletDetailsStart}from\"../../store/actions/WalletAction\";import{fetchCardDetailsStart}from\"../../store/actions/CardsAction\";import PaypalExpressBtn from\"react-paypal-express-checkout\";import{createNotification}from\"react-redux-notify\";import AddWalletAmountModal from\"../helper/AddWalletAmountModal\";import{getSuccessNotificationMessage,getErrorNotificationMessage}from\"../../components/helper/NotificationMessage\";var EcomPaymentIndex=function EcomPaymentIndex(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedAddress=_useState2[0],setSelectedAddress=_useState2[1];var _useState3=useState(\"card\"),_useState4=_slicedToArray(_useState3,2),selectedPayment=_useState4[0],setSelectedPayment=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedCard=_useState6[0],setSelectedCard=_useState6[1];var _useState7=useState({name:\"\",contact_number:\"\",address:\"\",landmark:\"\",pincode:\"\",state:\"\"}),_useState8=_slicedToArray(_useState7,2),newAddressInputData=_useState8[0],setNewAddressInputData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),addWalletAmountModal=_useState10[0],setAddWalletAmountModal=_useState10[1];var closeAddWalletAmountModal=function closeAddWalletAmountModal(){setAddWalletAmountModal(false);};var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isDefaultAddress=_useState12[0],setIsDefaultAddress=_useState12[1];var env=configuration.get(\"configData.PAYPAL_MODE\");// you can set here to 'production' for production\nvar currency=\"USD\";// or you can set this value from your props or state\nvar client={sandbox:configuration.get(\"configData.PAYPAL_ID\"),production:configuration.get(\"configData.PAYPAL_ID\")};useEffect(function(){props.dispatch(fetchCartListStart());props.dispatch(fetchDeliveryAddressStart());},[]);var handleDeliveryAddressSelect=function handleDeliveryAddressSelect(address){setSelectedAddress(address);setNewAddressInputData({name:\"\",contact_number:\"\",address:\"\",landmark:\"\",pincode:\"\",state:\"\"});};//enable it for default address select\n// useEffect(() => {\n//   if (!props.deliveryAddress.loading) {\n//     setSelectedAddress(\n//       props.deliveryAddress.data.delivery_addresses.find(\n//         (data) => data.is_default == 1\n//       )\n//     );\n//   }\n// }, [props.deliveryAddress.data]);\nvar handlePaymentChange=function handlePaymentChange(payment){setSelectedPayment(payment);};useEffect(function(){switch(selectedPayment){case\"card\":{props.dispatch(fetchCardDetailsStart());break;}case\"paypal\":{break;}case\"wallet\":{props.dispatch(fetchWalletDetailsStart());break;}default:return console.log(\"select payment\");}},[selectedPayment]);useEffect(function(){if(!props.cards.loading){setSelectedCard(props.cards.data.cards.find(function(data){return data.is_default==1;}));}},[props.cards.data]);var handleCardsChange=function handleCardsChange(card){setSelectedCard(card);};var handleAddressInputChange=function handleAddressInputChange(event){setNewAddressInputData(_objectSpread(_objectSpread({},newAddressInputData),{},_defineProperty({},event.target.name,event.target.value)));if(event.target.value.length>0){setSelectedAddress(null);}};var handleAddressCheckboxChange=function handleAddressCheckboxChange(){setIsDefaultAddress(!isDefaultAddress);};useEffect(function(){setNewAddressInputData(_objectSpread(_objectSpread({},newAddressInputData),{},{is_default:isDefaultAddress?1:0}));},[isDefaultAddress]);var getFormData=function getFormData(){var formdata={cart_ids:!props.cartList.loading&&props.cartList.data.carts.map(function(cart){return cart.cart_id;}).toString()};if(selectedAddress!=null){formdata=_objectSpread(_objectSpread({},formdata),{},{delivery_address_id:selectedAddress.delivery_address_id});}else{formdata=_objectSpread(_objectSpread({},formdata),newAddressInputData);}return formdata;};var handleSubmit=function handleSubmit(event){event.preventDefault();var formdata=getFormData();switch(selectedPayment){case\"card\":{props.dispatch(ordersPaymentByCardStart(_objectSpread({},formdata)));break;}case\"paypal\":{break;}case\"wallet\":{props.dispatch(ordersPaymentByWalletStart(_objectSpread({},formdata)));break;}default:return null;}};var paypalOnError=function paypalOnError(err){var notificationMessage=getErrorNotificationMessage(err);props.dispatch(createNotification(notificationMessage));};var paypalOnCancel=function paypalOnCancel(data){var notificationMessage=getErrorNotificationMessage(\"Payment cancelled please try again..\");props.dispatch(createNotification(notificationMessage));};var paypalOnSuccess=function paypalOnSuccess(payment){setTimeout(function(){var formdata=getFormData();props.dispatch(ordersPaymentByPaypalStart(_objectSpread({payment_id:payment.paymentID},formdata)));},1000);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"ecom-payment-sec\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h2\",null,t(\"ecom_payment\")),/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(event){return handleSubmit(event);}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:7,className:\"resp-mrg-btn-xs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"border-right-divider\"},props.deliveryAddress.loading?\"Loading\":/*#__PURE__*/React.createElement(React.Fragment,null,props.deliveryAddress.data.total>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"payment-method\"},props.deliveryAddress.data.delivery_addresses.map(function(address,index){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{lg:6,className:\"resp-mrg-btn-xs mb-3\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"radiobtn payment-method-card-1\"},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\"// id=\"inline-radio-1\"\n,id:\"inline-radio-\".concat(index+1),className:\"form-check-input\",checked:selectedAddress!=null&&selectedAddress.delivery_address_id==address.delivery_address_id?true:false,name:\"delivery_address\"}),/*#__PURE__*/React.createElement(\"label\",{type:\"radio\",for:\"inline-radio-1\",className:\"form-check-label card-label\",onClick:function onClick(){return handleDeliveryAddressSelect(address);}},/*#__PURE__*/React.createElement(\"p\",{className:\"no-margin mb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-option\"},address.contact_number)),/*#__PURE__*/React.createElement(\"p\",{className:\"no-margin mb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-option\"},address.landmark)),/*#__PURE__*/React.createElement(\"p\",{className:\"no-margin mb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-option\"},address.address))))));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"shipping-address-sec\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"shipping_address\")),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"Name\",name:\"name\",value:newAddressInputData.name,onChange:function onChange(event){return handleAddressInputChange(event);}})))),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"Contact Number\",name:\"contact_number\",type:\"number\",value:newAddressInputData.contact_number,onChange:function onChange(event){return handleAddressInputChange(event);}})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"Address\",name:\"address\",value:newAddressInputData.address,onChange:function onChange(event){return handleAddressInputChange(event);}})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"Landmark\",name:\"landmark\",value:newAddressInputData.landmark,onChange:function onChange(event){return handleAddressInputChange(event);}})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"pincode\",name:\"pincode\",type:\"number\",value:newAddressInputData.pincode,onChange:function onChange(event){return handleAddressInputChange(event);}})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"State\",name:\"state\",value:newAddressInputData.state,onChange:function onChange(event){return handleAddressInputChange(event);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"padding-small mb-3\"},/*#__PURE__*/React.createElement(Form.Check,{type:\"checkbox\",id:\"customControlAutosizing-1\",label:\"Save this information for next time\",custom:true,name:\"is_default\",defaultChecked:isDefaultAddress,onChange:function onChange(event){return handleAddressCheckboxChange(event);}})),/*#__PURE__*/React.createElement(Row,{className:\"payment-method mb-3 \"},/*#__PURE__*/React.createElement(Col,{md:6,className:\"resp-mrg-btn-xs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"radiobtn payment-method-card-1\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"radio\",id:\"inline-radio-1\",className:\"form-check-input\",checked:selectedPayment==\"card\"?true:false}),/*#__PURE__*/React.createElement(\"label\",{type:\"radio\",for:\"inline-radio-1\",className:\"form-check-label card-label\",onClick:function onClick(){return handlePaymentChange(\"card\");}},/*#__PURE__*/React.createElement(\"p\",{className:\"no-margin\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-option\"},\"Card\"))))),/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(\"div\",{className:\"radiobtn payment-method-card-1\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"radio\",id:\"inline-radio-2\",className:\"form-check-input\",checked:selectedPayment==\"paypal\"?true:false}),/*#__PURE__*/React.createElement(\"label\",{type:\"radio\",for:\"inline-radio-2\",className:\"form-check-label\",onClick:function onClick(){return handlePaymentChange(\"paypal\");}},\"Paypal\"))),/*#__PURE__*/React.createElement(Col,{md:6,className:\"mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"radiobtn payment-method-card-1\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"radio\",id:\"inline-radio-3\",className:\"form-check-input\",checked:selectedPayment==\"wallet\"?true:false}),/*#__PURE__*/React.createElement(\"label\",{type:\"radio\",for:\"inline-radio-3\",className:\"form-check-label\",onClick:function onClick(){return handlePaymentChange(\"wallet\");}},\"Wallet\")))),selectedPayment==\"card\"?props.cards.loading?\"Loading\":/*#__PURE__*/React.createElement(React.Fragment,null,props.cards.data.cards.length>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"payment-method gap-3\"},props.cards.data.cards.map(function(card,index){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"resp-mrg-btn-xs\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"radiobtn payment-method-card-1\"},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\"// id=\"inline-radio-1\"\n,id:\"inline-radio-\".concat(index+1),className:\"form-check-input\",name:\"cards\",checked:selectedCard!=null&&selectedCard.unique_id==card.unique_id?true:false}),/*#__PURE__*/React.createElement(\"label\",{type:\"radio\",for:\"inline-radio-1\",className:\"form-check-label card-label\",onClick:function onClick(){return handleCardsChange(card);}},/*#__PURE__*/React.createElement(\"p\",{className:\"no-margin mb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-option\"},card.card_holder_name)),/*#__PURE__*/React.createElement(\"p\",{className:\"desc\"},\"XXXX XXXX XXXX \",card.last_four)))));}))):/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-item\"},/*#__PURE__*/React.createElement(Link,{to:\"cards\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-account-item\"},/*#__PURE__*/React.createElement(Image,{className:\"add-account-icon\",src:window.location.origin+\"/assets/images/icons/new/add-card.svg\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"text-muted\"},\"Add Card\"))))):null,selectedPayment==\"wallet\"?props.wallet.loading?\"Loading\":/*#__PURE__*/React.createElement(React.Fragment,null,props.wallet.data.user_wallet&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"payment-method\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"radiobtn mb-4 payment-method-card\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"payment-head-tit\"},\"Wallet Balance :\",\" \",props.wallet.data.user_wallet.remaining_formatted,\"\\xA0\",/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setAddWalletAmountModal(true);},className:\"continue-shipping-btn ml-4\"},t(\"add_wallet_amount\"))))))))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"ecom-payment-btn-sec mt-4\"},selectedPayment===\"paypal\"?/*#__PURE__*/React.createElement(React.Fragment,null,selectedAddress!=null||Object.values(newAddressInputData).filter(function(data){if(data){return data;}}).length>=6?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PaypalExpressBtn,{env:env,client:client,currency:currency,total:!props.cartList.loading&&props.cartList.data.total_amount,onError:paypalOnError,onSuccess:paypalOnSuccess,onCancel:paypalOnCancel,shipping:2})):/*#__PURE__*/React.createElement(\"p\",{className:\"text-danger text-bold return-to-cart-link mb-0\"},\"Shipping address missing\")):/*#__PURE__*/React.createElement(Button,{type:\"submit\",className:\"continue-shipping-btn\"},t(\"pay_now\")),/*#__PURE__*/React.createElement(Link,{to:\"/ecom-cart\",className:\"return-to-cart-link\"},t(\"return_to_cart\")))))),/*#__PURE__*/React.createElement(Col,{md:5},props.cartList.loading?t(\"loading\"):props.cartList.data.carts.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"ecom-payment-product-details-sec\"},props.cartList.data.carts.map(function(cart){return/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-header-sec\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-header-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-info\"},/*#__PURE__*/React.createElement(Image,{className:\"product-thumbnail-img\",src:cart.user_product.picture}),/*#__PURE__*/React.createElement(\"h6\",null,cart.user_product.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"ecom-payment-product-amount\"},/*#__PURE__*/React.createElement(\"p\",null,cart.sub_total_formatted))));}),/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-body-sec\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-card\"},/*#__PURE__*/React.createElement(\"h5\",null,t(\"subtotal\")),/*#__PURE__*/React.createElement(\"p\",{className:\"product-amount\"},props.cartList.data.sub_total_formatted)),/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-card\"},/*#__PURE__*/React.createElement(\"h5\",null,t(\"shipping\")),/*#__PURE__*/React.createElement(\"p\",null,t(\"calculated_at_next_step\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-footer-sec\"},/*#__PURE__*/React.createElement(\"h5\",null,t(\"total\")),/*#__PURE__*/React.createElement(\"div\",{className:\"product-details-final-amount\"},/*#__PURE__*/React.createElement(\"span\",null,configuration.get(\"configData.currency_code\")),/*#__PURE__*/React.createElement(\"p\",null,props.cartList.data.total_formatted)))):/*#__PURE__*/React.createElement(NoDataFound,null)))))),/*#__PURE__*/React.createElement(AddWalletAmountModal,{addWalletAmountModal:addWalletAmountModal,closeAddWalletAmountModal:closeAddWalletAmountModal,payments:props.wallet}));};var mapStateToPros=function mapStateToPros(state){return{cartList:state.userProducts.cartList,deliveryAddress:state.userProducts.deliveryAddress,wallet:state.wallet.walletData,cards:state.cards.cardDetails};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(EcomPaymentIndex));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/Ecom/EcomPaymentIndex.jsx"],"names":["React","useState","useEffect","Container","Row","Col","Form","Button","Image","Link","fetchCartListStart","removeCartDetailsStart","fetchDeliveryAddressStart","ordersPaymentByWalletStart","ordersPaymentByCardStart","ordersPaymentByPaypalStart","connect","NoDataFound","configuration","translate","t","fetchWalletDetailsStart","fetchCardDetailsStart","PaypalExpressBtn","createNotification","AddWalletAmountModal","getSuccessNotificationMessage","getErrorNotificationMessage","EcomPaymentIndex","props","selectedAddress","setSelectedAddress","selectedPayment","setSelectedPayment","selectedCard","setSelectedCard","name","contact_number","address","landmark","pincode","state","newAddressInputData","setNewAddressInputData","addWalletAmountModal","setAddWalletAmountModal","closeAddWalletAmountModal","isDefaultAddress","setIsDefaultAddress","env","get","currency","client","sandbox","production","dispatch","handleDeliveryAddressSelect","handlePaymentChange","payment","console","log","cards","loading","data","find","is_default","handleCardsChange","card","handleAddressInputChange","event","target","value","length","handleAddressCheckboxChange","getFormData","formdata","cart_ids","cartList","carts","map","cart","cart_id","toString","delivery_address_id","handleSubmit","preventDefault","paypalOnError","err","notificationMessage","paypalOnCancel","paypalOnSuccess","setTimeout","payment_id","paymentID","deliveryAddress","total","delivery_addresses","index","unique_id","card_holder_name","last_four","window","location","origin","wallet","user_wallet","remaining_formatted","Object","values","filter","total_amount","user_product","picture","sub_total_formatted","total_formatted","mapStateToPros","userProducts","walletData","cardDetails","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Form, Button, Image } from \"react-bootstrap\";\nimport \"./Ecom.css\";\nimport { Link } from \"react-router-dom\";\nimport {\n  fetchCartListStart,\n  removeCartDetailsStart,\n  fetchDeliveryAddressStart,\n  ordersPaymentByWalletStart,\n  ordersPaymentByCardStart,\n  ordersPaymentByPaypalStart,\n} from \"../../store/actions/ProductsAction\";\nimport { connect } from \"react-redux\";\nimport NoDataFound from \"../NoDataFound/NoDataFound\";\nimport configuration from \"react-global-configuration\";\nimport { translate, t } from \"react-multi-lang\";\nimport { fetchWalletDetailsStart } from \"../../store/actions/WalletAction\";\nimport { fetchCardDetailsStart } from \"../../store/actions/CardsAction\";\nimport PaypalExpressBtn from \"react-paypal-express-checkout\";\nimport { createNotification } from \"react-redux-notify\";\nimport AddWalletAmountModal from \"../helper/AddWalletAmountModal\";\nimport {\n  getSuccessNotificationMessage,\n  getErrorNotificationMessage,\n} from \"../../components/helper/NotificationMessage\";\n\nconst EcomPaymentIndex = (props) => {\n  const [selectedAddress, setSelectedAddress] = useState(null);\n\n  const [selectedPayment, setSelectedPayment] = useState(\"card\");\n\n  const [selectedCard, setSelectedCard] = useState(null);\n\n  const [newAddressInputData, setNewAddressInputData] = useState({\n    name : \"\",\n    contact_number : \"\",\n    address : \"\",\n    landmark :\"\",\n    pincode : \"\",\n    state : \"\"\n  });\n\n  const [addWalletAmountModal, setAddWalletAmountModal] = useState(false);\n\n\tconst closeAddWalletAmountModal = () => {\n\t\tsetAddWalletAmountModal(false);\n\t};\n\n  const [isDefaultAddress, setIsDefaultAddress] = useState(false);\n\n  let env = configuration.get(\"configData.PAYPAL_MODE\"); // you can set here to 'production' for production\n  let currency = \"USD\"; // or you can set this value from your props or state\n\n  const client = {\n    sandbox: configuration.get(\"configData.PAYPAL_ID\"),\n    production: configuration.get(\"configData.PAYPAL_ID\"),\n  };\n\n  useEffect(() => {\n    props.dispatch(fetchCartListStart());\n    props.dispatch(fetchDeliveryAddressStart());\n  }, []);\n\n  const handleDeliveryAddressSelect = (address) => {\n    setSelectedAddress(address);\n    setNewAddressInputData({\n      name : \"\",\n      contact_number : \"\",\n      address : \"\",\n      landmark :\"\",\n      pincode : \"\",\n      state : \"\"\n    })\n  };\n\n  //enable it for default address select\n\n  // useEffect(() => {\n  //   if (!props.deliveryAddress.loading) {\n  //     setSelectedAddress(\n  //       props.deliveryAddress.data.delivery_addresses.find(\n  //         (data) => data.is_default == 1\n  //       )\n  //     );\n  //   }\n  // }, [props.deliveryAddress.data]);\n\n  const handlePaymentChange = (payment) => {\n    setSelectedPayment(payment);\n  };\n\n  useEffect(() => {\n    switch (selectedPayment) {\n      case \"card\": {\n        props.dispatch(fetchCardDetailsStart());\n        break;\n      }\n      case \"paypal\": {\n        break;\n      }\n      case \"wallet\": {\n        props.dispatch(fetchWalletDetailsStart());\n        break;\n      }\n      default:\n        return console.log(\"select payment\");\n    }\n  }, [selectedPayment]);\n\n  useEffect(() => {\n    if (!props.cards.loading) {\n      setSelectedCard(\n        props.cards.data.cards.find((data) => data.is_default == 1)\n      );\n    }\n  }, [props.cards.data]);\n\n  const handleCardsChange = (card) => {\n    setSelectedCard(card);\n  };\n\n  const handleAddressInputChange = (event) => {\n    setNewAddressInputData({\n      ...newAddressInputData,\n      [event.target.name]: event.target.value,\n    });\n\n    if(event.target.value.length > 0 ){\n      setSelectedAddress(null)\n    }\n  };\n\n  const handleAddressCheckboxChange = () => {\n    setIsDefaultAddress(!isDefaultAddress);\n  };\n\n  useEffect(() => {\n    setNewAddressInputData({\n      ...newAddressInputData,\n      is_default: isDefaultAddress ? 1 : 0,\n    });\n  }, [isDefaultAddress]);\n\n  const getFormData = () => {\n    let formdata = {\n      cart_ids:\n        !props.cartList.loading &&\n        props.cartList.data.carts.map((cart) => cart.cart_id).toString(),\n    };\n\n    if (selectedAddress != null) {\n      formdata = {\n        ...formdata,\n        delivery_address_id: selectedAddress.delivery_address_id,\n      };\n    } else {\n      formdata = {\n        ...formdata,\n        ...newAddressInputData,\n      };\n    }\n\n    return formdata;\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const formdata = getFormData();\n\n    switch (selectedPayment) {\n      case \"card\": {\n        props.dispatch(ordersPaymentByCardStart({ ...formdata }));\n        break;\n      }\n      case \"paypal\": {\n        break;\n      }\n      case \"wallet\": {\n        props.dispatch(ordersPaymentByWalletStart({ ...formdata }));\n        break;\n      }\n      default:\n        return null;\n    }\n  };\n\n  const paypalOnError = (err) => {\n    const notificationMessage = getErrorNotificationMessage(err);\n    props.dispatch(createNotification(notificationMessage));\n  };\n\n  const paypalOnCancel = (data) => {\n    const notificationMessage = getErrorNotificationMessage(\n      \"Payment cancelled please try again..\"\n    );\n    props.dispatch(createNotification(notificationMessage));\n  };\n\n  const paypalOnSuccess = (payment) => {\n    setTimeout(() => {\n      const formdata = getFormData();\n\n      props.dispatch(\n        ordersPaymentByPaypalStart({\n          payment_id: payment.paymentID,\n          ...formdata,\n        })\n      );\n    }, 1000);\n  };\n\n  return (\n    <>\n      <div className=\"ecom-payment-sec\">\n        <Container>\n          <h2>{t(\"ecom_payment\")}</h2>\n          <Form onSubmit={(event) => handleSubmit(event)}>\n            <Row>\n              <Col md={7} className=\"resp-mrg-btn-xs\">\n                <div className=\"border-right-divider\">\n                  {props.deliveryAddress.loading ? (\n                    \"Loading\"\n                  ) : (\n                    <>\n                      {props.deliveryAddress.data.total > 0 && (\n                        <>\n                          <Row className=\"payment-method\">\n                            {props.deliveryAddress.data.delivery_addresses.map(\n                              (address, index) => (\n                                <>\n                                  <Col\n                                    lg={6}\n                                    className=\"resp-mrg-btn-xs mb-3\"\n                                    key={index}\n                                  >\n                                    <div className=\"radiobtn payment-method-card-1\">\n                                      <input\n                                        type=\"radio\"\n                                        // id=\"inline-radio-1\"\n                                        id={`inline-radio-${index + 1}`}\n                                        className=\"form-check-input\"\n                                        checked={\n                                          selectedAddress != null &&\n                                          selectedAddress.delivery_address_id ==\n                                            address.delivery_address_id\n                                            ? true\n                                            : false\n                                        }\n                                        name=\"delivery_address\"\n                                      />\n                                      <label\n                                        type=\"radio\"\n                                        for=\"inline-radio-1\"\n                                        className=\"form-check-label card-label\"\n                                        onClick={() =>\n                                          handleDeliveryAddressSelect(address)\n                                        }\n                                      >\n                                        <p className=\"no-margin mb-3\">\n                                          <span className=\"card-option\">\n                                            {address.contact_number}\n                                          </span>\n                                        </p>\n                                        <p className=\"no-margin mb-3\">\n                                          <span className=\"card-option\">\n                                            {address.landmark}\n                                          </span>\n                                        </p>\n                                        <p className=\"no-margin mb-3\">\n                                          <span className=\"card-option\">\n                                            {address.address}\n                                          </span>\n                                        </p>\n                                      </label>\n                                    </div>\n                                  </Col>\n                                </>\n                              )\n                            )}\n                          </Row>\n                        </>\n                      )}\n                    </>\n                  )}\n                  {/* <div className=\"ecom-payment-header\">\n                      <h4>Contact Infromation</h4>\n                      <p>Already have an account? <Link to=\"/\">Login</Link></p>\n                  </div>\n                  <Form.Group controlId=\"formBasicEmail\">\n                      <Form.Control type=\"email\" placeholder=\"Enter email\" />\n                  </Form.Group>\n                  <Form.Check\n                      type=\"checkbox\"\n                      id=\"customControlAutosizing\"\n                      label=\"Keep me up to date on news and offers\"\n                      custom\n                  /> */}\n                  <div className=\"shipping-address-sec\">\n                    <h4>{t(\"shipping_address\")}</h4>\n                    <Form.Group>\n                      <Row>\n                        <Col>\n                          <Form.Control\n                            placeholder=\"Name\"\n                            name=\"name\"\n                            value={newAddressInputData.name}\n                            onChange={(event) =>\n                              handleAddressInputChange(event)\n                            }\n                          />\n                        </Col>\n                      </Row>\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Control\n                        placeholder=\"Contact Number\"\n                        name=\"contact_number\"\n                        type=\"number\"\n                        value={newAddressInputData.contact_number}\n                        onChange={(event) => handleAddressInputChange(event)}\n                      />\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Control\n                        placeholder=\"Address\"\n                        name=\"address\"\n                        value={newAddressInputData.address}\n                        onChange={(event) => handleAddressInputChange(event)}\n                      />\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Control\n                        placeholder=\"Landmark\"\n                        name=\"landmark\"\n                        value={newAddressInputData.landmark}\n                        onChange={(event) => handleAddressInputChange(event)}\n                      />\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Control\n                        placeholder=\"pincode\"\n                        name=\"pincode\"\n                        type=\"number\"\n                        value={newAddressInputData.pincode}\n                        onChange={(event) => handleAddressInputChange(event)}\n                      />\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Control\n                        placeholder=\"State\"\n                        name=\"state\"\n                        value={newAddressInputData.state}\n                        onChange={(event) => handleAddressInputChange(event)}\n                      />\n                    </Form.Group>\n                    {/* <Row>\n                      <Col>\n                        <Form.Group>\n                          <Form.Control\n                            as=\"select\"\n                            className=\"mr-sm-2\"\n                            id=\"inlineFormCustomSelect\"\n                            custom\n                          >\n                            <option value=\"0\">India</option>\n                            <option value=\"1\">USA</option>\n                            <option value=\"2\">UAE</option>\n                            <option value=\"3\">Spin</option>\n                          </Form.Control>\n                        </Form.Group>\n                      </Col>\n                      <Col>\n                        <Form.Group>\n                          <Form.Control\n                            as=\"select\"\n                            className=\"mr-sm-2\"\n                            id=\"inlineFormCustomSelect\"\n                            custom\n                          >\n                            <option value=\"0\">Tamil Nadu</option>\n                            <option value=\"1\">Kerala</option>\n                            <option value=\"2\">Andhra</option>\n                            <option value=\"3\">Telegana</option>\n                          </Form.Control>\n                        </Form.Group>\n                      </Col>\n                      <Col>\n                        <Form.Control placeholder=\"PIN code\" />\n                      </Col>\n                    </Row> */}\n                    <div className=\"padding-small mb-3\">\n                      <Form.Check\n                        type=\"checkbox\"\n                        id=\"customControlAutosizing-1\"\n                        label=\"Save this information for next time\"\n                        custom\n                        name=\"is_default\"\n                        defaultChecked={isDefaultAddress}\n                        onChange={(event) => handleAddressCheckboxChange(event)}\n                      />\n                    </div>\n                    <Row className=\"payment-method mb-3 \">\n                      <Col md={6} className=\"resp-mrg-btn-xs\">\n                        <div className=\"radiobtn payment-method-card-1\">\n                          <Form.Control\n                            type=\"radio\"\n                            id=\"inline-radio-1\"\n                            className=\"form-check-input\"\n                            checked={selectedPayment == \"card\" ? true : false}\n                          />\n                          <label\n                            type=\"radio\"\n                            for=\"inline-radio-1\"\n                            className=\"form-check-label card-label\"\n                            onClick={() => handlePaymentChange(\"card\")}\n                          >\n                            <p className=\"no-margin\">\n                              <span className=\"card-option\">Card</span>\n                            </p>\n                          </label>\n                        </div>\n                      </Col>\n                      <Col md={6}>\n                        <div className=\"radiobtn payment-method-card-1\">\n                          <Form.Control\n                            type=\"radio\"\n                            id=\"inline-radio-2\"\n                            className=\"form-check-input\"\n                            checked={selectedPayment == \"paypal\" ? true : false}\n                          />\n                          <label\n                            type=\"radio\"\n                            for=\"inline-radio-2\"\n                            className=\"form-check-label\"\n                            onClick={() => handlePaymentChange(\"paypal\")}\n                          >\n                            Paypal\n                          </label>\n                        </div>\n                      </Col>\n                      <Col md={6} className=\"mt-4\">\n                        <div className=\"radiobtn payment-method-card-1\">\n                          <Form.Control\n                            type=\"radio\"\n                            id=\"inline-radio-3\"\n                            className=\"form-check-input\"\n                            checked={selectedPayment == \"wallet\" ? true : false}\n                          />\n                          <label\n                            type=\"radio\"\n                            for=\"inline-radio-3\"\n                            className=\"form-check-label\"\n                            onClick={() => handlePaymentChange(\"wallet\")}\n                          >\n                            Wallet\n                          </label>\n                        </div>\n                      </Col>\n                    </Row>\n                    {selectedPayment == \"card\" ? (\n                      props.cards.loading ? (\n                        \"Loading\"\n                      ) : (\n                        <>\n                          {props.cards.data.cards.length > 0 ? (\n                            <>\n                              <Row className=\"payment-method gap-3\">\n                                {props.cards.data.cards.map((card, index) => (\n                                  <>\n                                    <Col\n                                      md={12}\n                                      className=\"resp-mrg-btn-xs\"\n                                      key={index}\n                                    >\n                                      <div className=\"radiobtn payment-method-card-1\">\n                                        <input\n                                          type=\"radio\"\n                                          // id=\"inline-radio-1\"\n                                          id={`inline-radio-${index + 1}`}\n                                          className=\"form-check-input\"\n                                          name=\"cards\"\n                                          checked={\n                                            selectedCard != null &&\n                                            selectedCard.unique_id ==\n                                              card.unique_id\n                                              ? true\n                                              : false\n                                          }\n                                        />\n                                        <label\n                                          type=\"radio\"\n                                          for=\"inline-radio-1\"\n                                          className=\"form-check-label card-label\"\n                                          onClick={() =>\n                                            handleCardsChange(card)\n                                          }\n                                        >\n                                          <p className=\"no-margin mb-3\">\n                                            <span className=\"card-option\">\n                                              {card.card_holder_name}\n                                            </span>\n                                          </p>\n\n                                          <p className=\"desc\">\n                                            XXXX XXXX XXXX {card.last_four}\n                                          </p>\n                                        </label>\n                                      </div>\n                                    </Col>\n                                  </>\n                                ))}\n                              </Row>\n                            </>\n                          ) : (\n                            <div className=\"card-stripe-item\">\n                              <Link to=\"cards\">\n                                <div className=\"add-account-item\">\n                                  <Image\n                                    className=\"add-account-icon\"\n                                    src={\n                                      window.location.origin +\n                                      \"/assets/images/icons/new/add-card.svg\"\n                                    }\n                                  />\n                                  <h5 className=\"text-muted\">Add Card</h5>\n                                </div>\n                              </Link>\n                            </div>\n                          )}\n                        </>\n                      )\n                    ) : null}\n                    {selectedPayment == \"wallet\" ? (\n                      props.wallet.loading ? (\n                        \"Loading\"\n                      ) : (\n                        <>\n                          {props.wallet.data.user_wallet && (\n                            <>\n                              <Row className=\"payment-method\">\n                                <Col md={12}>\n                                  <div className=\"radiobtn mb-4 payment-method-card\">\n                                    <div>\n                                      <h3 className=\"payment-head-tit\">\n                                        Wallet Balance :{\" \"}\n                                        {\n                                          props.wallet.data.user_wallet\n                                            .remaining_formatted\n                                        }&nbsp;\n                                        <Button onClick={() => setAddWalletAmountModal(true)} className=\"continue-shipping-btn ml-4\">\n                                        {t(\"add_wallet_amount\")}\n                                      </Button>\n                                      </h3>\n                                    </div>\n                                  </div>\n                                </Col>\n                              </Row>\n                            </>\n                          )}\n                        </>\n                      )\n                    ) : null}\n                    <div className=\"ecom-payment-btn-sec mt-4\">\n                      {selectedPayment === \"paypal\" ? (\n                        <>\n                          {selectedAddress != null ||\n                          Object.values(newAddressInputData).filter((data) => {\n                            if (data) {\n                              return data;\n                            }\n                          }).length >= 6 ? (\n                            <>\n                              <PaypalExpressBtn\n                                env={env}\n                                client={client}\n                                currency={currency}\n                                total={\n                                  !props.cartList.loading &&\n                                  props.cartList.data.total_amount\n                                }\n                                onError={paypalOnError}\n                                onSuccess={paypalOnSuccess}\n                                onCancel={paypalOnCancel}\n                                shipping={2}\n                              />\n                            </>\n                          ) : (\n                            <p className=\"text-danger text-bold return-to-cart-link mb-0\">\n                              Shipping address missing\n                            </p>\n                          )}\n                        </>\n                      ) : (\n                        <Button type=\"submit\" className=\"continue-shipping-btn\">\n                          {t(\"pay_now\")}\n                        </Button>\n                      )}\n\n                      <Link to={`/ecom-cart`} className=\"return-to-cart-link\">\n                        {t(\"return_to_cart\")}\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              </Col>\n              <Col md={5}>\n                {props.cartList.loading ? (\n                  t(\"loading\")\n                ) : props.cartList.data.carts.length > 0 ? (\n                  <div className=\"ecom-payment-product-details-sec\">\n                    {props.cartList.data.carts.map((cart) => (\n                      <div className=\"product-details-header-sec\">\n                        <div className=\"product-details-header-card\">\n                          <div className=\"product-details-info\">\n                            <Image\n                              className=\"product-thumbnail-img\"\n                              src={cart.user_product.picture}\n                            />\n                            <h6>{cart.user_product.name}</h6>\n                          </div>\n                          <div className=\"ecom-payment-product-amount\">\n                            <p>{cart.sub_total_formatted}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                    <div className=\"product-details-body-sec\">\n                      <div className=\"product-details-card\">\n                        <h5>{t(\"subtotal\")}</h5>\n                        <p className=\"product-amount\">\n                          {props.cartList.data.sub_total_formatted}\n                        </p>\n                      </div>\n                      <div className=\"product-details-card\">\n                        <h5>{t(\"shipping\")}</h5>\n                        <p>{t(\"calculated_at_next_step\")}</p>\n                      </div>\n                    </div>\n                    <div className=\"product-details-footer-sec\">\n                      <h5>{t(\"total\")}</h5>\n                      <div className=\"product-details-final-amount\">\n                        <span>\n                          {configuration.get(\"configData.currency_code\")}\n                        </span>\n                        <p>{props.cartList.data.total_formatted}</p>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <NoDataFound></NoDataFound>\n                )}\n              </Col>\n            </Row>\n          </Form>\n        </Container>\n      </div>\n      <AddWalletAmountModal\n\t\t\t\taddWalletAmountModal={addWalletAmountModal}\n\t\t\t\tcloseAddWalletAmountModal={closeAddWalletAmountModal}\n\t\t\t\tpayments={props.wallet}\n\t\t\t/>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  cartList: state.userProducts.cartList,\n  deliveryAddress: state.userProducts.deliveryAddress,\n  wallet: state.wallet.walletData,\n  cards: state.cards.cardDetails,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(EcomPaymentIndex));\n"]},"metadata":{},"sourceType":"module"}