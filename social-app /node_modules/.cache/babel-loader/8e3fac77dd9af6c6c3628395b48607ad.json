{"ast":null,"code":"import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useState,useEffect}from\"react\";import{Form,Button,Image,Modal,Tab,Nav,Row,Col}from\"react-bootstrap\";import{connect}from\"react-redux\";import{sendTipStripeStart,sendTipWalletStart,sendTipPaypalStart,sendTipCCBillStart,sendTipCoinPaymentStart}from\"../../store/actions/SendTipAction\";import{fetchWalletDetailsStart}from\"../../store/actions/WalletAction\";import configuration from\"react-global-configuration\";import PaypalExpressBtn from\"react-paypal-express-checkout\";import{createNotification}from\"react-redux-notify\";import{getSuccessNotificationMessage,getErrorNotificationMessage}from\"../../components/helper/NotificationMessage\";import{fetchCardDetailsStart}from\"../../store/actions/CardsAction\";import{Link}from\"react-router-dom\";import{translate,t}from\"react-multi-lang\";var SendTipModal=function SendTipModal(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),amount=_useState2[0],setAmount=_useState2[1];var _useState3=useState(localStorage.getItem(\"default_payment_method\")),_useState4=_slicedToArray(_useState3,2),paymentType=_useState4[0],setPaymentType=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPayPal=_useState8[0],payPal=_useState8[1];useEffect(function(){if(props.sendTip===true){props.dispatch(fetchCardDetailsStart());props.dispatch(fetchWalletDetailsStart());}},[props.sendTip]);var handleSubmit=function handleSubmit(event){event.preventDefault();if(paymentType===\"CARD\")props.dispatch(sendTipStripeStart({post_id:props.post_id!=undefined||props.post_id!=null?props.post_id:\"\",amount:amount,message:message,user_id:props.user_id}));if(paymentType===\"WALLET\")props.dispatch(sendTipWalletStart({post_id:props.post_id!=undefined||props.post_id!=null?props.post_id:\"\",amount:amount,message:message,user_id:props.user_id}));if(paymentType===\"CCBILL\")props.dispatch(sendTipCCBillStart({post_id:props.post_id!=undefined||props.post_id!=null?props.post_id:\"\",amount:amount,user_id:props.user_id}));if(paymentType===\"coinpayment\")props.dispatch(sendTipCoinPaymentStart({post_id:props.post_id!=undefined||props.post_id!=null?props.post_id:\"\",amount:amount,user_id:props.user_id}));props.closeSendTipModal();};var paypalOnSuccess=function paypalOnSuccess(payment){setTimeout(function(){props.dispatch(sendTipPaypalStart({payment_id:payment.paymentID,post_id:props.post_id!=undefined||props.post_id!=null?props.post_id:\"\",amount:amount,user_id:props.user_id}));},1000);props.closeSendTipModal();};var paypalOnError=function paypalOnError(err){var notificationMessage=getErrorNotificationMessage(err);_this.props.dispatch(createNotification(notificationMessage));};var paypalOnCancel=function paypalOnCancel(data){var notificationMessage=getErrorNotificationMessage(\"Payment cancelled please try again..\");_this.props.dispatch(createNotification(notificationMessage));};var choosePaymentOption=function choosePaymentOption(event){console.log(amount);setPaymentType(event);};var env=configuration.get(\"configData.PAYPAL_MODE\");// you can set here to 'production' for production\nvar currency=\"USD\";// or you can set this value from your props or state\nvar client={sandbox:configuration.get(\"configData.PAYPAL_ID\"),production:configuration.get(\"configData.PAYPAL_ID\")};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{centered:true,size:\"lg\",className:\"modal-dialog-center sent-tip-modal\",show:props.sendTip,onHide:props.closeSendTipModal},props.sendTip===true?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,t(\"send_tip\"))),/*#__PURE__*/React.createElement(Modal.Body,{className:\"subscription-tip-ppv-tab\"},/*#__PURE__*/React.createElement(Tab.Container,{id:\"left-tabs-example\",defaultActiveKey:paymentType},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:3},/*#__PURE__*/React.createElement(Nav,{variant:\"pills\",className:\"flex-column\"},configuration.get(\"configData.is_stripe_enabled\")==1&&configuration.get(\"configData.stripe_publishable_key\")!==\"\"&&configuration.get(\"configData.stripe_secret_key\")!==\"\"?/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{onClick:function onClick(){return setPaymentType(\"CARD\");},eventKey:\"CARD\"},t(\"card_stripe\"))):null,configuration.get(\"configData.is_paypal_enabled\")==1&&configuration.get(\"configData.PAYPAL_ID\")!==\"\"?/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{onClick:function onClick(){return setPaymentType(\"PAYPAL\");},eventKey:\"PAYPAL\"},t(\"paypal\"))):null,configuration.get(\"configData.is_ccbill_enabled\")==1&&configuration.get(\"configData.flex_form_id\")!==\"\"&&configuration.get(\"configData.salt_key\")!==\"\"?/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{onClick:function onClick(){return setPaymentType(\"CCBILL\");},eventKey:\"CCBILL\"},t(\"ccbill\"))):null,configuration.get(\"configData.is_wallet_payment_enabled\")==1?/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{onClick:function onClick(){return setPaymentType(\"WALLET\");},eventKey:\"WALLET\"},t(\"wallet\"))):null)),/*#__PURE__*/React.createElement(Col,{sm:9},/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-box\"},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput1\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"number\",placeholder:t(\"tip_amount\")// value={amount}\n,defaultValue:amount,onChange:function onChange(event){if(event.currentTarget.value>0){setAmount(event.currentTarget.value);}}})),/*#__PURE__*/React.createElement(Tab.Content,null,configuration.get(\"configData.is_stripe_enabled\")==1&&configuration.get(\"configData.stripe_publishable_key\")!==\"\"&&configuration.get(\"configData.stripe_secret_key\")!==\"\"?/*#__PURE__*/React.createElement(Tab.Pane,{eventKey:\"CARD\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-sec\"},props.cards.loading?\"\":props.cards.data.cards.length>0?props.cards.data.cards.map(function(card){return card.is_default==1&&/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-list-box\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"mb-3\"},\"XXXX XXXX XXXX \",card.last_four),/*#__PURE__*/React.createElement(\"h5\",{className:\"text-muted\"},card.card_type),/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-bottom\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-action-btn\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-link-text text-success\"},t(\"default_card\")))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-item\"},/*#__PURE__*/React.createElement(Link,{to:\"cards\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-account-item\"},/*#__PURE__*/React.createElement(Image,{className:\"add-account-icon\",src:window.location.origin+\"/assets/images/icons/new/add-card.svg\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"text-muted\"},\"Add Card\")))))):null,configuration.get(\"configData.is_wallet_payment_enabled\")==1?/*#__PURE__*/React.createElement(Tab.Pane,{eventKey:\"WALLET\"},props.wallet.loading?\"\":/*#__PURE__*/React.createElement(\"div\",{className:\"card-stripe-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wallet-balence-amount\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"available\")),/*#__PURE__*/React.createElement(\"p\",null,props.wallet.data.user_wallet.remaining_formatted)),amount>props.wallet.data.user_wallet.remaining?/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"p\",{className:\"conv-desc desc\"},t(\"low_wallet_balance_tips_payment_para\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Link,{to:\"/wallet\",className:\"withdraw-money-btn\"},t(\"add_wallet_amount\")))):null)):null),/*#__PURE__*/React.createElement(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlTextarea1\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:3,placeholder:t(\"message_optional\"),className:\"height-auto\",onChange:function onChange(event){setMessage(event.currentTarget.value);}})))))))),/*#__PURE__*/React.createElement(Modal.Footer,null,paymentType===\"PAYPAL\"&&amount!=0?/*#__PURE__*/React.createElement(PaypalExpressBtn,{env:env,client:client,currency:currency,total:amount,onError:paypalOnError,onSuccess:paypalOnSuccess,onCancel:paypalOnCancel}):null,/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"btn btn-danger\",\"data-dismiss\":\"modal\",onClick:props.closeSendTipModal},t(\"cancel\")),paymentType!==\"PAYPAL\"?/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"btn btn-success\",\"data-dismiss\":\"modal\",onClick:handleSubmit,disabled:props.tipStripe.buttonDisable},props.tipStripe.loadingButtonContent!==null?props.tipStripe.loadingButtonContent:t(\"send_tip\")):null)):null));};var mapStateToPros=function mapStateToPros(state){return{tipStripe:state.tip.tipStripe,wallet:state.wallet.walletData,cards:state.cards.cardDetails};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(SendTipModal));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/helper/SendTipModal.jsx"],"names":["React","useState","useEffect","Form","Button","Image","Modal","Tab","Nav","Row","Col","connect","sendTipStripeStart","sendTipWalletStart","sendTipPaypalStart","sendTipCCBillStart","sendTipCoinPaymentStart","fetchWalletDetailsStart","configuration","PaypalExpressBtn","createNotification","getSuccessNotificationMessage","getErrorNotificationMessage","fetchCardDetailsStart","Link","translate","t","SendTipModal","props","amount","setAmount","localStorage","getItem","paymentType","setPaymentType","message","setMessage","showPayPal","payPal","sendTip","dispatch","handleSubmit","event","preventDefault","post_id","undefined","user_id","closeSendTipModal","paypalOnSuccess","payment","setTimeout","payment_id","paymentID","paypalOnError","err","notificationMessage","paypalOnCancel","data","choosePaymentOption","console","log","env","get","currency","client","sandbox","production","currentTarget","value","cards","loading","length","map","card","is_default","last_four","card_type","window","location","origin","wallet","user_wallet","remaining_formatted","remaining","tipStripe","buttonDisable","loadingButtonContent","mapStateToPros","state","tip","walletData","cardDetails","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Form,\n  Button,\n  Image,\n  Modal,\n  Tab,\n  Nav,\n  Row,\n  Col,\n} from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport {\n  sendTipStripeStart,\n  sendTipWalletStart,\n  sendTipPaypalStart,\n  sendTipCCBillStart,\n  sendTipCoinPaymentStart,\n} from \"../../store/actions/SendTipAction\";\nimport { fetchWalletDetailsStart } from \"../../store/actions/WalletAction\";\nimport configuration from \"react-global-configuration\";\n\nimport PaypalExpressBtn from \"react-paypal-express-checkout\";\nimport { createNotification } from \"react-redux-notify\";\nimport {\n  getSuccessNotificationMessage,\n  getErrorNotificationMessage,\n} from \"../../components/helper/NotificationMessage\";\nimport { fetchCardDetailsStart } from \"../../store/actions/CardsAction\";\nimport { Link } from \"react-router-dom\";\nimport { translate, t } from \"react-multi-lang\";\n\nconst SendTipModal = (props) => {\n  const [amount, setAmount] = useState(1);\n  const [paymentType, setPaymentType] = useState(\n    localStorage.getItem(\"default_payment_method\")\n  );\n  const [message, setMessage] = useState(\"\");\n  const [showPayPal, payPal] = useState(false);\n\n  useEffect(() => {\n    if (props.sendTip === true) {\n      props.dispatch(fetchCardDetailsStart());\n      props.dispatch(fetchWalletDetailsStart());\n    }\n  }, [props.sendTip]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (paymentType === \"CARD\")\n      props.dispatch(\n        sendTipStripeStart({\n          post_id:\n            props.post_id != undefined || props.post_id != null\n              ? props.post_id\n              : \"\",\n          amount: amount,\n          message: message,\n          user_id: props.user_id,\n        })\n      );\n    if (paymentType === \"WALLET\")\n      props.dispatch(\n        sendTipWalletStart({\n          post_id:\n            props.post_id != undefined || props.post_id != null\n              ? props.post_id\n              : \"\",\n          amount: amount,\n          message: message,\n          user_id: props.user_id,\n        })\n      );\n    if (paymentType === \"CCBILL\")\n      props.dispatch(\n        sendTipCCBillStart({\n          post_id:\n            props.post_id != undefined || props.post_id != null\n              ? props.post_id\n              : \"\",\n          amount: amount,\n          user_id: props.user_id,\n        })\n      );\n    if (paymentType === \"coinpayment\")\n      props.dispatch(\n        sendTipCoinPaymentStart({\n          post_id:\n            props.post_id != undefined || props.post_id != null\n              ? props.post_id\n              : \"\",\n          amount: amount,\n          user_id: props.user_id,\n        })\n      );\n    props.closeSendTipModal();\n  };\n\n  const paypalOnSuccess = (payment) => {\n    setTimeout(() => {\n      props.dispatch(\n        sendTipPaypalStart({\n          payment_id: payment.paymentID,\n          post_id:\n            props.post_id != undefined || props.post_id != null\n              ? props.post_id\n              : \"\",\n          amount: amount,\n          user_id: props.user_id,\n        })\n      );\n    }, 1000);\n    props.closeSendTipModal();\n  };\n\n  const paypalOnError = (err) => {\n    const notificationMessage = getErrorNotificationMessage(err);\n    this.props.dispatch(createNotification(notificationMessage));\n  };\n\n  const paypalOnCancel = (data) => {\n    const notificationMessage = getErrorNotificationMessage(\n      \"Payment cancelled please try again..\"\n    );\n    this.props.dispatch(createNotification(notificationMessage));\n  };\n\n  const choosePaymentOption = (event) => {\n    console.log(amount);\n    setPaymentType(event);\n  };\n\n  let env = configuration.get(\"configData.PAYPAL_MODE\"); // you can set here to 'production' for production\n  let currency = \"USD\"; // or you can set this value from your props or state\n\n  const client = {\n    sandbox: configuration.get(\"configData.PAYPAL_ID\"),\n    production: configuration.get(\"configData.PAYPAL_ID\"),\n  };\n\n  return (\n    <>\n      <Modal\n        centered\n        size=\"lg\"\n        className=\"modal-dialog-center sent-tip-modal\"\n        show={props.sendTip}\n        onHide={props.closeSendTipModal}\n      >\n        {props.sendTip === true ? \n        <>\n        <Modal.Header closeButton>\n          <Modal.Title>{t(\"send_tip\")}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className=\"subscription-tip-ppv-tab\">\n          <Tab.Container id=\"left-tabs-example\" defaultActiveKey={paymentType}>\n            <Row>\n              <Col sm={3}>\n                <Nav variant=\"pills\" className=\"flex-column\">\n                  {configuration.get(\"configData.is_stripe_enabled\") == 1 &&\n                  configuration.get(\"configData.stripe_publishable_key\") !==\n                    \"\" &&\n                  configuration.get(\"configData.stripe_secret_key\") !== \"\" ? (\n                    <Nav.Item>\n                      <Nav.Link\n                        onClick={() => setPaymentType(\"CARD\")}\n                        eventKey=\"CARD\"\n                      >\n                        {t(\"card_stripe\")}\n                      </Nav.Link>\n                    </Nav.Item>\n                  ) : null}\n                  {configuration.get(\"configData.is_paypal_enabled\") == 1 &&\n                  configuration.get(\"configData.PAYPAL_ID\") !== \"\" ? (\n                    <Nav.Item>\n                      <Nav.Link\n                        onClick={() => setPaymentType(\"PAYPAL\")}\n                        eventKey=\"PAYPAL\"\n                      >\n                        {t(\"paypal\")}\n                      </Nav.Link>\n                    </Nav.Item>\n                  ) : null}\n                  {configuration.get(\"configData.is_ccbill_enabled\") == 1 &&\n                  configuration.get(\"configData.flex_form_id\") !== \"\" &&\n                  configuration.get(\"configData.salt_key\") !== \"\" ? (\n                    <Nav.Item>\n                      <Nav.Link\n                        onClick={() => setPaymentType(\"CCBILL\")}\n                        eventKey=\"CCBILL\"\n                      >\n                        {t(\"ccbill\")}\n                      </Nav.Link>\n                    </Nav.Item>\n                  ) : null}\n                  {configuration.get(\"configData.is_wallet_payment_enabled\") ==\n                  1 ? (\n                    <Nav.Item>\n                      <Nav.Link\n                        onClick={() => setPaymentType(\"WALLET\")}\n                        eventKey=\"WALLET\"\n                      >\n                        {t(\"wallet\")}\n                      </Nav.Link>\n                    </Nav.Item>\n                  ) : null}\n                </Nav>\n              </Col>\n              <Col sm={9}>\n                <div className=\"card-stripe-box\">\n                  <Form>\n                    <Form.Group\n                      className=\"mb-3\"\n                      controlId=\"exampleForm.ControlInput1\"\n                    >\n                      <Form.Control\n                        type=\"number\"\n                        placeholder={t(\"tip_amount\")}\n                        // value={amount}\n                        defaultValue={amount}\n                        onChange={(event) => {\n                          if (event.currentTarget.value > 0) {\n                            setAmount(event.currentTarget.value);\n                          }\n                        }}\n                      />\n                    </Form.Group>\n                    <Tab.Content>\n                      {configuration.get(\"configData.is_stripe_enabled\") == 1 &&\n                      configuration.get(\"configData.stripe_publishable_key\") !==\n                        \"\" &&\n                      configuration.get(\"configData.stripe_secret_key\") !==\n                        \"\" ? (\n                        <Tab.Pane eventKey=\"CARD\">\n                          <div className=\"card-stripe-sec\">\n                            {props.cards.loading ? (\n                              \"\"\n                            ) : props.cards.data.cards.length > 0 ? (\n                              props.cards.data.cards.map(\n                                (card) =>\n                                  card.is_default == 1 && (\n                                    <div className=\"card-stripe-list-box\">\n                                      <h5 className=\"mb-3\">\n                                        XXXX XXXX XXXX {card.last_four}\n                                      </h5>\n                                      <h5 className=\"text-muted\">\n                                        {card.card_type}\n                                      </h5>\n                                      <div className=\"card-stripe-bottom\">\n                                        <div className=\"card-stripe-action-btn\">\n                                          <p className=\"card-link-text text-success\">\n                                            {t(\"default_card\")}\n                                          </p>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  )\n                              )\n                            ) : (\n                              <div className=\"card-stripe-item\">\n                                <Link to=\"cards\">\n                                  <div className=\"add-account-item\">\n                                    <Image\n                                      className=\"add-account-icon\"\n                                      src={\n                                        window.location.origin +\n                                        \"/assets/images/icons/new/add-card.svg\"\n                                      }\n                                    />\n                                    <h5 className=\"text-muted\">Add Card</h5>\n                                  </div>\n                                </Link>\n                              </div>\n                            )}\n                          </div>\n                        </Tab.Pane>\n                      ) : null}\n\n                      {configuration.get(\n                        \"configData.is_wallet_payment_enabled\"\n                      ) == 1 ? (\n                        <Tab.Pane eventKey=\"WALLET\">\n                          {props.wallet.loading ? (\n                            \"\"\n                          ) : (\n                            <div className=\"card-stripe-box\">\n                              <div className=\"wallet-balence-amount\">\n                                <h4>{t(\"available\")}</h4>\n                                <p>\n                                  {\n                                    props.wallet.data.user_wallet\n                                      .remaining_formatted\n                                  }\n                                </p>\n                              </div>\n                              {amount >\n                              props.wallet.data.user_wallet.remaining ? (\n                                <div className=\"\">\n                                  <p className=\"conv-desc desc\">\n                                    {t(\"low_wallet_balance_tips_payment_para\")}\n                                  </p>\n                                  <div className=\"d-flex\">\n                                    <Link\n                                      to=\"/wallet\"\n                                      className=\"withdraw-money-btn\"\n                                    >\n                                      {t(\"add_wallet_amount\")}\n                                    </Link>\n                                  </div>\n                                </div>\n                              ) : null}\n                            </div>\n                          )}\n                        </Tab.Pane>\n                      ) : null}\n                    </Tab.Content>\n                    <Form.Group\n                      className=\"mb-3\"\n                      controlId=\"exampleForm.ControlTextarea1\"\n                    >\n                      <Form.Control\n                        as=\"textarea\"\n                        rows={3}\n                        placeholder={t(\"message_optional\")}\n                        className=\"height-auto\"\n                        onChange={(event) => {\n                          setMessage(event.currentTarget.value);\n                        }}\n                      />\n                    </Form.Group>\n                  </Form>\n                </div>\n              </Col>\n            </Row>\n          </Tab.Container>\n        </Modal.Body>\n        <Modal.Footer>\n          {paymentType === \"PAYPAL\" && amount != 0 ? (\n            <PaypalExpressBtn\n              env={env}\n              client={client}\n              currency={currency}\n              total={amount}\n              onError={paypalOnError}\n              onSuccess={paypalOnSuccess}\n              onCancel={paypalOnCancel}\n            />\n          ) : null}\n          <Button\n            type=\"button\"\n            className=\"btn btn-danger\"\n            data-dismiss=\"modal\"\n            onClick={props.closeSendTipModal}\n          >\n            {t(\"cancel\")}\n          </Button>\n          {paymentType !== \"PAYPAL\" ? (\n            <Button\n              type=\"button\"\n              className=\"btn btn-success\"\n              data-dismiss=\"modal\"\n              onClick={handleSubmit}\n              disabled={props.tipStripe.buttonDisable}\n            >\n              {props.tipStripe.loadingButtonContent !== null\n                ? props.tipStripe.loadingButtonContent\n                : t(\"send_tip\")}\n            </Button>\n          ) : null}\n        </Modal.Footer>\n        </>\n        : null}\n      </Modal>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  tipStripe: state.tip.tipStripe,\n  wallet: state.wallet.walletData,\n  cards: state.cards.cardDetails,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(SendTipModal));\n"]},"metadata":{},"sourceType":"module"}