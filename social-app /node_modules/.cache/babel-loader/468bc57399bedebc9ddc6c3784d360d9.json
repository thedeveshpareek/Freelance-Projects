{"ast":null,"code":"import _objectSpread from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{connect}from\"react-redux\";import{translate,t}from\"react-multi-lang\";import{storyFileUploadStart}from'../../store/actions/StoriesAction';import{useEffect}from\"react\";var $=window.$;var StoryUploadModal=function StoryUploadModal(props){var _useState=useState({previewImage:\"\",file:\"\",file_type:\"\"}),_useState2=_slicedToArray(_useState,2),fileData=_useState2[0],setFileData=_useState2[1];useEffect(function(){if(!props.storyUpload.loading){$(\"#addStoryModal\").modal(\"hide\");setFileData({previewImage:\"\",file:\"\",file_type:\"\"});}},[props.storyUpload.data]);var handleChangeImage=function handleChangeImage(event){if(event.currentTarget.type===\"file\"){var reader=new FileReader();var file=event.currentTarget.files[0];reader.onloadend=function(){setFileData(_objectSpread(_objectSpread({},fileData),{},{previewImage:reader.result,file:file,file_type:file.type.match(\"image\")?\"image\":\"video\"}));};if(file){reader.readAsDataURL(file);}}};var handleFileUpload=function handleFileUpload(){props.dispatch(storyFileUploadStart({file:fileData.file,file_type:fileData.file_type}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{class:\"modal custom-modal fade\",id:\"addStoryModal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"addStoryModal\",\"aria-hidden\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog modal-md modal-dialog-centered\",role:\"document\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content \"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"modal-title\"},\"Add Story\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"story-upload-file\"},fileData.previewImage!=\"\"?fileData.file_type==\"image\"?/*#__PURE__*/React.createElement(\"img\",{src:fileData.previewImage,alt:\"\"}):/*#__PURE__*/React.createElement(\"video\",{autoplay:true,controls:true,id:\"myVideo\",className:\"user-profile1 w-100\"},/*#__PURE__*/React.createElement(\"source\",{src:fileData.previewImage,type:\"video/mp4\"})):null),fileData.previewImage!=\"\"?/*#__PURE__*/React.createElement(\"div\",{className:\"upload-button-wrapper\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\",disabled:!props.storyUpload.loading&&props.storyUpload.buttonDisable},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/*,video/*\",onChange:function onChange(event){return handleChangeImage(event);}}),t(\"select_image_video\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn gradient-btn gradientcolor addBank btn btn-primary file-upload-button\",disabled:props.storyUpload.buttonDisable,onClick:handleFileUpload},props.storyUpload.loadingButtonContent!=\"\"?props.storyUpload.loadingButtonContent:\"\".concat(t(\"upload_image_video\")))):/*#__PURE__*/React.createElement(\"button\",{className:\"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/*,video/*\",onChange:function onChange(event){return handleChangeImage(event);}}),t(\"select_image_video\")))))));};var mapStateToPros=function mapStateToPros(state){return{storyUpload:state.userStories.storyUpload};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(StoryUploadModal));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/Home/StoryUploadModal.jsx"],"names":["React","useState","connect","translate","t","storyFileUploadStart","useEffect","$","window","StoryUploadModal","props","previewImage","file","file_type","fileData","setFileData","storyUpload","loading","modal","data","handleChangeImage","event","currentTarget","type","reader","FileReader","files","onloadend","result","match","readAsDataURL","handleFileUpload","dispatch","buttonDisable","loadingButtonContent","mapStateToPros","state","userStories","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport {storyFileUploadStart} from '../../store/actions/StoriesAction'\nimport { useEffect } from \"react\";\n\n\nconst $ = window.$;\n\nconst StoryUploadModal = (props) => {\n\n  const [fileData, setFileData] = useState({\n    previewImage: \"\",\n    file: \"\",\n    file_type: \"\",\n  });\n\n  useEffect(() => {\n    if(!props.storyUpload.loading){\n      $(\"#addStoryModal\").modal(\"hide\");\n      setFileData({\n        previewImage: \"\",\n        file: \"\",\n        file_type: \"\",\n      })\n    }\n  },[props.storyUpload.data])\n\n  const handleChangeImage = (event) => {\n    if (event.currentTarget.type === \"file\") {\n      let reader = new FileReader();\n      let file = event.currentTarget.files[0];\n      reader.onloadend = () => {\n        setFileData({\n          ...fileData,\n          previewImage: reader.result,\n          file: file,\n          file_type: file.type.match(\"image\") ? \"image\" : \"video\",\n        });\n      };\n      if (file) {\n        reader.readAsDataURL(file);\n      }\n    }\n  };\n\n  const handleFileUpload = () => {\n    props.dispatch(storyFileUploadStart({\n      file : fileData.file,\n      file_type : fileData.file_type\n    }))\n  }\n\n  return (\n    <>\n      <div\n        class={`modal custom-modal fade`}\n        id=\"addStoryModal\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"addStoryModal\"\n        aria-hidden=\"true\"\n      >\n        <div\n          className=\"modal-dialog modal-md modal-dialog-centered\"\n          role=\"document\"\n        >\n          <div className=\"modal-content \">\n            <div className=\"modal-header\">\n              <h3 className=\"modal-title\">Add Story</h3>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"story-upload-file\">\n                {fileData.previewImage != \"\" ? fileData.file_type == \"image\" ? (\n                  <img src={fileData.previewImage} alt=\"\" />\n                ) : (\n                  <video\n                    autoplay\n                    controls\n                    id=\"myVideo\"\n                    className=\"user-profile1 w-100\"\n                  >\n                    <source src={fileData.previewImage} type=\"video/mp4\" />\n                  </video>\n                ): null}\n              </div>\n              {fileData.previewImage != \"\" ? (\n                <div className=\"upload-button-wrapper\">\n                  <button className=\"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\" disabled={!props.storyUpload.loading && props.storyUpload.buttonDisable}>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*,video/*\"\n                      onChange={(event) => handleChangeImage(event)}\n                    />\n                     {t(\"select_image_video\")}\n                  </button>\n                  <button className=\"btn gradient-btn gradientcolor addBank btn btn-primary file-upload-button\" disabled={props.storyUpload.buttonDisable} onClick={handleFileUpload}>\n                    { props.storyUpload.loadingButtonContent != \"\" ? props.storyUpload.loadingButtonContent : `${t(\"upload_image_video\")}`}\n                  </button>\n                </div>\n              ) : (\n                <button className=\"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\">\n                  <input\n                    type=\"file\"\n                    accept=\"image/*,video/*\"\n                    onChange={(event) => handleChangeImage(event)}\n                  />\n                  {t(\"select_image_video\")}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  storyUpload: state.userStories.storyUpload,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(mapStateToPros, mapDispatchToProps)(translate(StoryUploadModal));\n"]},"metadata":{},"sourceType":"module"}