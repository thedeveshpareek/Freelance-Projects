{"ast":null,"code":"var _jsxFileName = \"/Users/devsmac/Downloads/fx-frontend/src/components/Home/StoryUploadModal.jsx\";\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport { storyFileUploadStart } from '../../store/actions/StoriesAction';\nimport { useEffect } from \"react\";\nconst $ = window.$;\n\nconst StoryUploadModal = props => {\n  const [fileData, setFileData] = useState({\n    previewImage: \"\",\n    file: \"\",\n    file_type: \"\"\n  });\n  useEffect(() => {\n    if (!props.storyUpload.loading) {\n      $(\"#addStoryModal\").modal(\"hide\");\n      setFileData({\n        previewImage: \"\",\n        file: \"\",\n        file_type: \"\"\n      });\n    }\n  }, [props.storyUpload.data]);\n\n  const handleChangeImage = event => {\n    if (event.currentTarget.type === \"file\") {\n      let reader = new FileReader();\n      let file = event.currentTarget.files[0];\n\n      reader.onloadend = () => {\n        setFileData({ ...fileData,\n          previewImage: reader.result,\n          file: file,\n          file_type: file.type.match(\"image\") ? \"image\" : \"video\"\n        });\n      };\n\n      if (file) {\n        reader.readAsDataURL(file);\n      }\n    }\n  };\n\n  const handleFileUpload = () => {\n    props.dispatch(storyFileUploadStart({\n      file: fileData.file,\n      file_type: fileData.file_type\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    class: `modal custom-modal fade`,\n    id: \"addStoryModal\",\n    tabindex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"addStoryModal\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-md modal-dialog-centered\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, \"Add Story\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"story-upload-file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, fileData.previewImage != \"\" ? fileData.file_type == \"image\" ? /*#__PURE__*/React.createElement(\"img\", {\n    src: fileData.previewImage,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(\"video\", {\n    autoplay: true,\n    controls: true,\n    id: \"myVideo\",\n    className: \"user-profile1 w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"source\", {\n    src: fileData.previewImage,\n    type: \"video/mp4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  })) : null), fileData.previewImage != \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload-button-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\",\n    disabled: !props.storyUpload.loading && props.storyUpload.buttonDisable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*,video/*\",\n    onChange: event => handleChangeImage(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }), t(\"select_image_video\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn gradient-btn gradientcolor addBank btn btn-primary file-upload-button\",\n    disabled: props.storyUpload.buttonDisable,\n    onClick: handleFileUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, props.storyUpload.loadingButtonContent != \"\" ? props.storyUpload.loadingButtonContent : `${t(\"upload_image_video\")}`)) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*,video/*\",\n    onChange: event => handleChangeImage(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }), t(\"select_image_video\")))))));\n};\n\nconst mapStateToPros = state => ({\n  storyUpload: state.userStories.storyUpload\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch\n  };\n}\n\nexport default connect(mapStateToPros, mapDispatchToProps)(translate(StoryUploadModal));","map":{"version":3,"sources":["/Users/devsmac/Downloads/fx-frontend/src/components/Home/StoryUploadModal.jsx"],"names":["React","useState","connect","translate","t","storyFileUploadStart","useEffect","$","window","StoryUploadModal","props","fileData","setFileData","previewImage","file","file_type","storyUpload","loading","modal","data","handleChangeImage","event","currentTarget","type","reader","FileReader","files","onloadend","result","match","readAsDataURL","handleFileUpload","dispatch","buttonDisable","loadingButtonContent","mapStateToPros","state","userStories","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport {storyFileUploadStart} from '../../store/actions/StoriesAction'\nimport { useEffect } from \"react\";\n\n\nconst $ = window.$;\n\nconst StoryUploadModal = (props) => {\n\n  const [fileData, setFileData] = useState({\n    previewImage: \"\",\n    file: \"\",\n    file_type: \"\",\n  });\n\n  useEffect(() => {\n    if(!props.storyUpload.loading){\n      $(\"#addStoryModal\").modal(\"hide\");\n      setFileData({\n        previewImage: \"\",\n        file: \"\",\n        file_type: \"\",\n      })\n    }\n  },[props.storyUpload.data])\n\n  const handleChangeImage = (event) => {\n    if (event.currentTarget.type === \"file\") {\n      let reader = new FileReader();\n      let file = event.currentTarget.files[0];\n      reader.onloadend = () => {\n        setFileData({\n          ...fileData,\n          previewImage: reader.result,\n          file: file,\n          file_type: file.type.match(\"image\") ? \"image\" : \"video\",\n        });\n      };\n      if (file) {\n        reader.readAsDataURL(file);\n      }\n    }\n  };\n\n  const handleFileUpload = () => {\n    props.dispatch(storyFileUploadStart({\n      file : fileData.file,\n      file_type : fileData.file_type\n    }))\n  }\n\n  return (\n    <>\n      <div\n        class={`modal custom-modal fade`}\n        id=\"addStoryModal\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"addStoryModal\"\n        aria-hidden=\"true\"\n      >\n        <div\n          className=\"modal-dialog modal-md modal-dialog-centered\"\n          role=\"document\"\n        >\n          <div className=\"modal-content \">\n            <div className=\"modal-header\">\n              <h3 className=\"modal-title\">Add Story</h3>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"story-upload-file\">\n                {fileData.previewImage != \"\" ? fileData.file_type == \"image\" ? (\n                  <img src={fileData.previewImage} alt=\"\" />\n                ) : (\n                  <video\n                    autoplay\n                    controls\n                    id=\"myVideo\"\n                    className=\"user-profile1 w-100\"\n                  >\n                    <source src={fileData.previewImage} type=\"video/mp4\" />\n                  </video>\n                ): null}\n              </div>\n              {fileData.previewImage != \"\" ? (\n                <div className=\"upload-button-wrapper\">\n                  <button className=\"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\" disabled={!props.storyUpload.loading && props.storyUpload.buttonDisable}>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*,video/*\"\n                      onChange={(event) => handleChangeImage(event)}\n                    />\n                     {t(\"select_image_video\")}\n                  </button>\n                  <button className=\"btn gradient-btn gradientcolor addBank btn btn-primary file-upload-button\" disabled={props.storyUpload.buttonDisable} onClick={handleFileUpload}>\n                    { props.storyUpload.loadingButtonContent != \"\" ? props.storyUpload.loadingButtonContent : `${t(\"upload_image_video\")}`}\n                  </button>\n                </div>\n              ) : (\n                <button className=\"btn gradient-btn gradientcolor addBank btn btn-primary story-upload file-upload-button\">\n                  <input\n                    type=\"file\"\n                    accept=\"image/*,video/*\"\n                    onChange={(event) => handleChangeImage(event)}\n                  />\n                  {t(\"select_image_video\")}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  storyUpload: state.userStories.storyUpload,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(mapStateToPros, mapDispatchToProps)(translate(StoryUploadModal));\n"]},"metadata":{},"sourceType":"module"}