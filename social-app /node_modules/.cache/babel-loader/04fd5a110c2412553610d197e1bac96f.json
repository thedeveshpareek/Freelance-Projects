{"ast":null,"code":"import _objectSpread from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import{Row,Col,Image,Container,InputGroup,FormControl,Button,Form,Overlay,Tooltip,Dropdown,Media}from\"react-bootstrap\";import\"./UserChat.css\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{addMessageContent,fetchChatMessageStart,fetchChatUsersStart}from\"../../store/actions/ChatAction\";import{saveBlockUserStart}from\"../../store/actions/UserAction\";import ChatUserList from\"./ChatUserList\";import InboxNoDataFound from\"../NoDataFound/InboxNoDataFound\";import io from\"socket.io-client\";import configuration from\"react-global-configuration\";import{translate,t}from\"react-multi-lang\";import InboxLoader from\"../Loader/InboxLoader\";import{getErrorNotificationMessage}from\"../helper/NotificationMessage\";import{createNotification}from\"react-redux-notify/lib/modules/Notifications\";import VerifiedBadgeNoShadow from\"../Handlers/VerifiedBadgeNoShadow\";import ChatAssetModal from\"../helper/ChatAssetModal\";import ReactPlayer from\"react-player/lazy\";import AssetPaymentModal from\"../helper/AssetPaymentModal\";import{Picker,EmojiData}from\"emoji-mart\";import\"emoji-mart/css/emoji-mart.css\";import ReactAudioPlayer from\"react-audio-player\";import{isMobile}from\"react-device-detect\";import ReactFancyBox from'react-fancybox';import'react-fancybox/lib/fancybox.css';var $=window.$;var chatSocket;var UserChatIndex=function UserChatIndex(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeChat=_useState2[0],setActiveChat=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),toUserId=_useState4[0],setToUserId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),inputMessage=_useState6[0],setInputMessage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),initialHeight=_useState8[0],setInitialHeight=_useState8[1];var messageRef=useRef();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),chatAssetUpload=_useState10[0],setChatAssetUpload=_useState10[1];var _useState11=useState(\"picture\"),_useState12=_slicedToArray(_useState11,2),fileType=_useState12[0],setFileType=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),chatPayment=_useState14[0],setPaymentModal=_useState14[1];var _useState15=useState({chat_message_id:0,from_user_id:localStorage.getItem(\"userId\"),to_user_id:toUserId,amount_formatted:0,amount:0}),_useState16=_slicedToArray(_useState15,2),paymentData=_useState16[0],setPaymentData=_useState16[1];var closeChatAssetUploadModal=function closeChatAssetUploadModal(){setChatAssetUpload(false);};var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),emojiPickerState=_useState18[0],SetEmojiPicker=_useState18[1];var invalidMessageRef=useRef(null);var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),emptyMessageCheck=_useState20[0],setEmptyMessageCheck=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),searchKey=_useState22[0],setSearchKey=_useState22[1];useEffect(function(){props.dispatch(fetchChatUsersStart({search_key:searchKey}));var chatSocketUrl=configuration.get(\"configData.chat_socket_url\");if(chatSocketUrl===\"\"){// const notificationMessage = getErrorNotificationMessage(\n//   \"Socket URL is not configured. Chat wil not work...\"\n// );\n// props.dispatch(createNotification(notificationMessage));\n// window.location.assign(\"/home\");\n}if(messageRef.current){messageRef.current.scrollIntoView({behavior:\"smooth\",block:\"end\",inline:\"nearest\"});}},[]);useEffect(function(){console.log(\"Number of times called\");if(props.chatUsers.loading===false&&props.chatUsers.data.users.length>0){console.log(\"Number of times called true  \");setToUserId(props.chatUsers.data.users[0].to_user_id);chatSocketConnect(props.chatUsers.data.users[0].to_user_id);}else{}},[!props.chatUsers.loading]);// Scroll down function..\nuseEffect(function(){console.log(\"Scroll down..\");var objDiv=document.getElementById(\"options-holder\");if(objDiv!=null){var differenceNumber=objDiv.offsetHeight>objDiv.scrollHeight?objDiv.offsetHeight-objDiv.scrollHeight:objDiv.scrollHeight-objDiv.offsetHeight;if(differenceNumber>280){objDiv.scrollTop=objDiv.scrollHeight;}else{objDiv.scrollTop=initialHeight;setInitialHeight(initialHeight+20);}}},[props.chatMessages.data.messages]);var chatSocketConnect=function chatSocketConnect(to_user_id){// check the socket url is configured\nvar chatSocketUrl=configuration.get(\"configData.chat_socket_url\");console.log(\"chatSocket\",chatSocketUrl);console.log(\"Input ID\",to_user_id);if(chatSocketUrl){chatSocket=io(chatSocketUrl,{query:\"commonid:'user_id_\"+localStorage.getItem(\"userId\")+\"_to_user_id_\"+to_user_id+\"',myid:\"+localStorage.getItem(\"userId\")});console.log(\"chatSocket\",chatSocket);chatSocket.emit(\"update sender\",{commonid:\"user_id_\"+localStorage.getItem(\"userId\")+\"_to_user_id_\"+to_user_id,myid:localStorage.getItem(\"userId\")});var chatContent;chatSocket.on(\"message\",function(newData){var content=[];content.push(newData);// chatContent = [...this.state.chatData, ...content];\n// this.setState({ chatData: chatContent });\nconsole.log(content);props.dispatch(addMessageContent(content));});}};var changeUser=function changeUser(event,chat,index){chatSocket.disconnect();if(isMobile){window.location.assign(\"/user-chat-room/\"+chat.from_user_id+\"/\"+chat.to_user_id);}event.preventDefault();setActiveChat(index);var to_user_id=chat.to_user_id==localStorage.getItem(\"userId\")?chat.from_user_id:chat.to_user_id;setToUserId(to_user_id);props.dispatch(fetchChatMessageStart({to_user_id:chat.to_user_id,from_user_id:chat.from_user_id}));chatSocketConnect(to_user_id);};var handleChatSubmit=function handleChatSubmit(event){event.preventDefault();var chatSocketUrl=configuration.get(\"configData.chat_socket_url\");if(inputMessage.length==0){setEmptyMessageCheck(true);}if(chatSocketUrl!=undefined&&inputMessage){var chatData=[{from_user_id:localStorage.getItem(\"userId\"),to_user_id:toUserId,message:inputMessage,type:\"uu\",user_picture:localStorage.getItem(\"user_picture\"),loggedin_user_id:localStorage.getItem(\"userId\"),created:Date(),from_username:localStorage.getItem(\"username\"),from_displayname:localStorage.getItem(\"name\"),from_userpicture:localStorage.getItem(\"user_picture\"),from_user_unique_id:\"\",to_username:\"\",to_displayname:\"\",to_userpicture:\"\",to_user_unique_id:\"\"}];chatSocket.emit(\"message\",chatData[0]);var messages;if(props.chatMessages.data.messages!=null){messages=[].concat(_toConsumableArray(props.chatMessages.data.messages),chatData);}else{messages=[].concat(chatData);}setInputMessage(\"\");props.dispatch(addMessageContent(chatData));}};useEffect(function(){props.assetUpload.loading||handleMediaSubmit();},[props.assetUpload.loading]);var handleMediaSubmit=function handleMediaSubmit(){var assetData=props.assetUpload.data.chat_asset;var assetMessage=props.assetUpload.data.chat_message;var chatSocketUrl=configuration.get(\"configData.chat_socket_url\");if(chatSocketUrl!=undefined&&assetData&&assetMessage){var chatData=[{from_user_id:localStorage.getItem(\"userId\"),to_user_id:toUserId,chat_message_id:assetMessage?assetMessage.chat_message_id:\"\",message:assetMessage?assetMessage.message:\"\",type:\"uu\",user_picture:localStorage.getItem(\"user_picture\"),loggedin_user_id:localStorage.getItem(\"userId\"),created:Date(),from_username:localStorage.getItem(\"username\"),from_displayname:localStorage.getItem(\"name\"),from_userpicture:localStorage.getItem(\"user_picture\"),from_user_unique_id:\"\",to_username:\"\",to_displayname:\"\",to_userpicture:\"\",to_user_unique_id:\"\",chat_asset_id:assetData?assetData.chat_asset_id:\"\",chat_asset_url:assetMessage.amount>0?assetData.blur_file:assetData.file,file_type:assetData.file_type,is_user_needs_pay:assetMessage.amount>0?1:0,amount:assetMessage.amount>0?assetMessage.amount:0,amount_formatted:assetMessage.amount>0?assetMessage.amount_formatted:0,payment_text:assetMessage.amount>0?\"UNLOCK MESSAGE FOR \"+assetMessage.amount_formatted:\"\"}];var chatMessageData=[{from_user_id:localStorage.getItem(\"userId\"),to_user_id:toUserId,chat_message_id:assetMessage?assetMessage.chat_message_id:\"\",message:assetMessage?assetMessage.message:\"\",type:\"uu\",user_picture:localStorage.getItem(\"user_picture\"),loggedin_user_id:localStorage.getItem(\"userId\"),created:Date(),from_username:localStorage.getItem(\"username\"),from_displayname:localStorage.getItem(\"name\"),from_userpicture:localStorage.getItem(\"user_picture\"),from_user_unique_id:\"\",to_username:\"\",to_displayname:\"\",to_userpicture:\"\",to_user_unique_id:\"\",chat_asset_id:assetData?assetData.chat_asset_id:\"\",chat_asset_url:assetData.file,file_type:assetData.file_type,amount:assetMessage.amount>0?assetMessage.amount:0,amount_formatted:assetMessage.amount>0?assetMessage.amount_formatted:0,is_user_needs_pay:0,payment_text:\"\"}];chatSocket.emit(\"message\",chatData[0]);var messages;if(props.chatMessages.data.messages!=null){messages=[].concat(_toConsumableArray(props.chatMessages.data.messages),chatMessageData);}else{messages=[].concat(chatMessageData);}if(assetData){closeChatAssetUploadModal();}setInputMessage(\"\");props.dispatch(addMessageContent(chatMessageData));}};var chatInputChange=function chatInputChange(value){setInputMessage(value);if(inputMessage.length>0){setEmptyMessageCheck(false);}};var handleAssetUploadModal=function handleAssetUploadModal(fileType){setChatAssetUpload(true);setFileType(fileType);};var handleAssetPayment=function handleAssetPayment(event,chat_message_id,amount_formatted,amount){event.preventDefault();setPaymentData(_objectSpread(_objectSpread({},paymentData),{},{chat_message_id:chat_message_id,amount:amount,amount_formatted:amount_formatted}));setPaymentModal(true);};var closePaymentModal=function closePaymentModal(){setPaymentModal(false);};function triggerPicker(event){event.preventDefault();SetEmojiPicker(!emojiPickerState);}var handleEmojiSelect=function handleEmojiSelect(emoji){SetEmojiPicker(false);setInputMessage(inputMessage+emoji.native);};var handleBlockUser=function handleBlockUser(event,status,user_id){event.preventDefault();props.dispatch(saveBlockUserStart({user_id:user_id,is_other_profile:1}));};var searchUser=function searchUser(value){setSearchKey(value);props.dispatch(fetchChatUsersStart({search_key:value}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-sec\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\",md:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-list-sec\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-list-header\"},/*#__PURE__*/React.createElement(Link,{to:\"/home\"},/*#__PURE__*/React.createElement(\"div\",{className:\"back-icon\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-chevron-left\"}))),/*#__PURE__*/React.createElement(\"h3\",null,t(\"chat\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-list-search-sec\"},/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(FormControl,{placeholder:t(\"search_by_username\"),\"aria-label\":t(\"search_by_username\"),\"aria-describedby\":\"basic-addon2\",onChange:function onChange(event){return searchUser(event.target.value);},value:searchKey}),/*#__PURE__*/React.createElement(InputGroup.Text,{id:\"basic-addon2\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-search\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-list-collapse-body\"},props.chatUsers.loading?null:props.chatUsers.data&&props.chatUsers.data.users.length>0?/*#__PURE__*/React.createElement(ChatUserList,{chatUsers:props.chatUsers.data,activeChat:activeChat,setActiveChat:setActiveChat,changeUser:changeUser}):/*#__PURE__*/React.createElement(\"div\",{className:\"user-list-card active\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-list-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-list-info\"},/*#__PURE__*/React.createElement(\"h6\",null,t(\"no_user_found\"))))))),props.chatUsers.loading||props.chatMessages.loading?\"\":props.chatMessages.data.user&&props.chatMessages.data.user.user_unique_id?/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-room-sec mobile-display-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-room-header\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"+props.chatMessages.data.user.user_unique_id,className:\"user-chat-msg\"},/*#__PURE__*/React.createElement(\"h3\",null,props.chatMessages.data.user.name,\" \",props.chatMessages.data.user.is_verified_badge==1?/*#__PURE__*/React.createElement(VerifiedBadgeNoShadow,null):null,props.chatMessages.data.user.is_online_status==1?/*#__PURE__*/React.createElement(\"span\",{className:\"text-success f-12\"},\" \",\"(\",t(\"online\"),\")\"):\"\"),/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"link-user-name\"},\"@\",props.chatMessages.data.user.name,\" \")),/*#__PURE__*/React.createElement(Dropdown,null,/*#__PURE__*/React.createElement(Dropdown.Toggle,{className:\"btn btn-default dropdown-toggle\",type:\"button\",id:\"dropdown-basic\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ellipsis-v svg-clone vertical-dots h-dots\"})),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"dropdown-menu dropdown-menu-right r-dropdown-menu\"},/*#__PURE__*/React.createElement(Media,{as:\"li\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"+props.chatMessages.data.user.user_unique_id,className:\"dropdown-a\"},\"View profile\")),/*#__PURE__*/React.createElement(Media,{as:\"li\",className:\"divider\"}),props.chatMessages.data.is_block_user==1&&/*#__PURE__*/React.createElement(Media,{as:\"li\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"dropdown-a\",onClick:function onClick(event){return handleBlockUser(event,\"unblocked\",props.chatMessages.data.user.user_id);}},\"UnBlock\")),/*#__PURE__*/React.createElement(React.Fragment,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-main-wrapper-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-content-sec\",ref:messageRef},props.chatMessages.data.messages.length>0?props.chatMessages.data.messages.map(function(chatMessage,index){return/*#__PURE__*/React.createElement(React.Fragment,null,chatMessage.from_user_id==localStorage.getItem(\"userId\")?/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-right-align\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-user-img-sec\"},/*#__PURE__*/React.createElement(Image,{src:localStorage.getItem(\"user_picture\"),alt:\"\",className:\"user-message-img\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-info\"},chatMessage.chat_asset_url&&chatMessage.file_type==\"video\"?/*#__PURE__*/React.createElement(ReactPlayer,{url:chatMessage.chat_asset_url,controls:true,className:\"post-video-size chat-video\",width:\"450px\",height:\"450px\"}):\"\",chatMessage.chat_asset_url&&chatMessage.file_type==\"audio\"?/*#__PURE__*/React.createElement(ReactAudioPlayer,{src:chatMessage.chat_asset_url,controls:true,width:\"450px\",height:\"450px\",className:\"chat-room-audio-display\",autoPlay:false,controlsList:\"nodownload\"}):// <ReactPlayer\n//   url={chatMessage.chat_asset_url}\n//   controls={true}\n//   width=\"450px\"\n//   height=\"450px\"\n//   className=\"chat-room-audio-display\"\n// />\n\"\",/*#__PURE__*/React.createElement(\"div\",null,chatMessage.chat_asset_url&&chatMessage.file_type==\"image\"?/*#__PURE__*/React.createElement(ReactFancyBox,{image:chatMessage.chat_asset_url,className:\"chat-view-image\"}):\"\",chatMessage.is_user_needs_pay===1?/*#__PURE__*/React.createElement(\"div\",{className:\"gallery-top-btn-sec\"},/*#__PURE__*/React.createElement(Button,{className:\"subscribe-post-btn-sec\",onClick:function onClick(event){return handleAssetPayment(event,chatMessage.chat_message_id,chatMessage.amount,chatMessage.amount_formatted);}},chatMessage.payment_text)):\"\"),chatMessage.message==\"\"?null:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"You, \",chatMessage.created),/*#__PURE__*/React.createElement(\"h6\",null,chatMessage.message)))):/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-left-align\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-user-img-sec\"},/*#__PURE__*/React.createElement(Image,{src:props.chatMessages.data.user.picture,alt:\"\",className:\"user-message-img\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-message-info\"},chatMessage.chat_asset_url&&chatMessage.file_type==\"video\"?chatMessage.is_user_needs_pay===1?/*#__PURE__*/React.createElement(Image,{src:chatMessage.chat_asset_url,className:\"chat-view-image\"}):/*#__PURE__*/React.createElement(ReactPlayer,{url:chatMessage.chat_asset_url,controls:true,className:\"post-video-size chat-room-video-display chat-video\",width:\"450px\",height:\"450px\"}):\"\",/*#__PURE__*/React.createElement(\"div\",null,chatMessage.chat_asset_url&&chatMessage.file_type==\"image\"?/*#__PURE__*/React.createElement(Image,{src:chatMessage.chat_asset_url,className:\"chat-view-image\"// onClick={(event) =>\n//   handleImagePreview(event, 1)\n// }\n}):\"\",chatMessage.chat_asset_url&&chatMessage.file_type==\"audio\"?chatMessage.is_user_needs_pay===1?/*#__PURE__*/React.createElement(Image,{src:chatMessage.chat_asset_url,className:\"chat-view-image\"}):/*#__PURE__*/React.createElement(ReactAudioPlayer,{src:chatMessage.chat_asset_url,controls:true,width:\"450px\",height:\"450px\",className:\"chat-room-audio-display\",autoPlay:false,controlsList:\"nodownload\"})// <ReactPlayer\n//   url={chatMessage.chat_asset_url}\n//   controls={true}\n//   width=\"450px\"\n//   height=\"450px\"\n//   className=\"chat-room-audio-display\"\n// />\n:\"\",chatMessage.is_user_needs_pay===1?/*#__PURE__*/React.createElement(\"div\",{className:\"gallery-top-btn-sec chat-room-pay-display\"},/*#__PURE__*/React.createElement(Button,{className:\"subscribe-post-btn-sec\",onClick:function onClick(event){return handleAssetPayment(event,chatMessage.chat_message_id,chatMessage.amount,chatMessage.amount_formatted);}},chatMessage.payment_text)):\"\"),chatMessage.message==\"\"?null:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,props.chatMessages.data.user.name,\", \",chatMessage.created),/*#__PURE__*/React.createElement(\"h6\",null,chatMessage.message)))),\" \");}):\"\")),/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-main-wrapper-footer\"},/*#__PURE__*/React.createElement(Form,{id:\"chat_post_form\",className:\"has-advanced-upload\",onSubmit:handleChatSubmit},/*#__PURE__*/React.createElement(InputGroup,{hasValidation:true},/*#__PURE__*/React.createElement(FormControl,{placeholder:\"Type a message\",\"aria-label\":\"Type a message\",\"aria-describedby\":\"basic-addon2\",value:inputMessage,onChange:function onChange(event){chatInputChange(event.currentTarget.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-icon-sec\"},configuration.get(\"configData.is_chat_asset_enabled\")==1?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,{id:\"basic-addon2\",className:\"chat-border-needed border-radius-zero\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",\"data-can_send\":\"true\",className:\"g-btn m-rounded b-chat__btn-submit\",onClick:function onClick(){return handleAssetUploadModal(\"image\");}},/*#__PURE__*/React.createElement(Image,{src:window.location.origin+\"/assets/images/icons/picture.svg\",className:\"svg-clone  wh-32\"})))),/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,{id:\"basic-addon2\",className:\"border-radius-zero\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",\"data-can_send\":\"true\",className:\"g-btn m-rounded b-chat__btn-submit\",onClick:function onClick(){return handleAssetUploadModal(\"video\");}},/*#__PURE__*/React.createElement(Image,{src:window.location.origin+\"/assets/images/icons/movie.svg\",className:\"svg-clone  wh-32\"})))),/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,{id:\"basic-addon2\",className:\"chat-border-zero\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",\"data-can_send\":\"true\",className:\"g-btn m-rounded b-chat__btn-submit\",onClick:function onClick(){return handleAssetUploadModal(\"audio\");}},/*#__PURE__*/React.createElement(Image,{src:window.location.origin+\"/assets/images/icons/audio.png\",className:\"svg-clone  wh-32\"}))))):\"\",/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,{id:\"basic-addon2\",className:\"position-relative last-child-mobile-icon chat-border-zero\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"space-between-evenly\",\"data-can_send\":\"true\",onClick:handleChatSubmit,ref:invalidMessageRef},/*#__PURE__*/React.createElement(Image,{className:\"comment-send-icon\",src:window.location.origin+\"/assets/images/icons/comment-send-icon.png\"})))),/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,null,/*#__PURE__*/React.createElement(Overlay,{target:invalidMessageRef,show:emptyMessageCheck,placement:\"top\"},function(props){return/*#__PURE__*/React.createElement(Tooltip,Object.assign({id:\"chat-invalid\"},props),\"Please type a message\");}),/*#__PURE__*/React.createElement(Button,{className:\"ml-2\",type:\"button\",onClick:triggerPicker},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-smile\"})))))))),emojiPickerState&&/*#__PURE__*/React.createElement(\"div\",{className:\"emojiWrapper chat-emoji\"},/*#__PURE__*/React.createElement(Picker,{title:\"\",emoji:\"point_up\",onSelect:function onSelect(emoji){return handleEmojiSelect(emoji);}}))):/*#__PURE__*/React.createElement(InboxNoDataFound,null))))),/*#__PURE__*/React.createElement(ChatAssetModal,{chatAssetUpload:chatAssetUpload,closeChatAssetUploadModal:closeChatAssetUploadModal,fileType:fileType,toUserId:toUserId}),props.chatMessages.loading?t(\"loading\"):/*#__PURE__*/React.createElement(AssetPaymentModal,{chatPayment:chatPayment,closePaymentModal:closePaymentModal,paymentData:paymentData})));};var mapStateToPros=function mapStateToPros(state){return{chatUsers:state.chat.chatUsers,chatMessages:state.chat.messages,assetUpload:state.chatAsset.saveAssetUpload};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(UserChatIndex));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/UserChat/UserChatIndex.jsx"],"names":["React","useEffect","useState","useRef","Row","Col","Image","Container","InputGroup","FormControl","Button","Form","Overlay","Tooltip","Dropdown","Media","Link","connect","addMessageContent","fetchChatMessageStart","fetchChatUsersStart","saveBlockUserStart","ChatUserList","InboxNoDataFound","io","configuration","translate","t","InboxLoader","getErrorNotificationMessage","createNotification","VerifiedBadgeNoShadow","ChatAssetModal","ReactPlayer","AssetPaymentModal","Picker","EmojiData","ReactAudioPlayer","isMobile","ReactFancyBox","$","window","chatSocket","UserChatIndex","props","activeChat","setActiveChat","toUserId","setToUserId","inputMessage","setInputMessage","initialHeight","setInitialHeight","messageRef","chatAssetUpload","setChatAssetUpload","fileType","setFileType","chatPayment","setPaymentModal","chat_message_id","from_user_id","localStorage","getItem","to_user_id","amount_formatted","amount","paymentData","setPaymentData","closeChatAssetUploadModal","emojiPickerState","SetEmojiPicker","invalidMessageRef","emptyMessageCheck","setEmptyMessageCheck","searchKey","setSearchKey","dispatch","search_key","chatSocketUrl","get","current","scrollIntoView","behavior","block","inline","console","log","chatUsers","loading","data","users","length","chatSocketConnect","objDiv","document","getElementById","differenceNumber","offsetHeight","scrollHeight","scrollTop","chatMessages","messages","query","emit","commonid","myid","chatContent","on","newData","content","push","changeUser","event","chat","index","disconnect","location","assign","preventDefault","handleChatSubmit","undefined","chatData","message","type","user_picture","loggedin_user_id","created","Date","from_username","from_displayname","from_userpicture","from_user_unique_id","to_username","to_displayname","to_userpicture","to_user_unique_id","assetUpload","handleMediaSubmit","assetData","chat_asset","assetMessage","chat_message","chat_asset_id","chat_asset_url","blur_file","file","file_type","is_user_needs_pay","payment_text","chatMessageData","chatInputChange","value","handleAssetUploadModal","handleAssetPayment","closePaymentModal","triggerPicker","handleEmojiSelect","emoji","native","handleBlockUser","status","user_id","is_other_profile","searchUser","target","user","user_unique_id","name","is_verified_badge","is_online_status","is_block_user","map","chatMessage","picture","currentTarget","origin","mapStateToPros","state","chatAsset","saveAssetUpload","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  Row,\n  Col,\n  Image,\n  Container,\n  InputGroup,\n  FormControl,\n  Button,\n  Form,\n  Overlay,\n  Tooltip,\n  Dropdown,\n  Media,\n} from \"react-bootstrap\";\nimport \"./UserChat.css\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport {\n  addMessageContent,\n  fetchChatMessageStart,\n  fetchChatUsersStart,\n} from \"../../store/actions/ChatAction\";\nimport { saveBlockUserStart } from \"../../store/actions/UserAction\";\nimport ChatUserList from \"./ChatUserList\";\nimport InboxNoDataFound from \"../NoDataFound/InboxNoDataFound\";\nimport io from \"socket.io-client\";\nimport configuration from \"react-global-configuration\";\nimport { translate, t } from \"react-multi-lang\";\n\nimport InboxLoader from \"../Loader/InboxLoader\";\nimport { getErrorNotificationMessage } from \"../helper/NotificationMessage\";\nimport { createNotification } from \"react-redux-notify/lib/modules/Notifications\";\nimport VerifiedBadgeNoShadow from \"../Handlers/VerifiedBadgeNoShadow\";\nimport ChatAssetModal from \"../helper/ChatAssetModal\";\nimport ReactPlayer from \"react-player/lazy\";\nimport AssetPaymentModal from \"../helper/AssetPaymentModal\";\nimport { Picker, EmojiData } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport ReactAudioPlayer from \"react-audio-player\";\nimport { isMobile } from \"react-device-detect\";\nimport ReactFancyBox from 'react-fancybox'\nimport 'react-fancybox/lib/fancybox.css'\n\nconst $ = window.$;\n\nlet chatSocket;\n\nconst UserChatIndex = (props) => {\n  const [activeChat, setActiveChat] = useState(0);\n  const [toUserId, setToUserId] = useState(0);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [initialHeight, setInitialHeight] = useState(0);\n\n  const messageRef = useRef();\n\n  const [chatAssetUpload, setChatAssetUpload] = useState(false);\n  const [fileType, setFileType] = useState(\"picture\");\n  const [chatPayment, setPaymentModal] = useState(false);\n  const [paymentData, setPaymentData] = useState({\n    chat_message_id: 0,\n    from_user_id: localStorage.getItem(\"userId\"),\n    to_user_id: toUserId,\n    amount_formatted: 0,\n    amount: 0,\n  });\n\n  const closeChatAssetUploadModal = () => {\n    setChatAssetUpload(false);\n  };\n\n  const [emojiPickerState, SetEmojiPicker] = useState(false);\n\n  const invalidMessageRef = useRef(null);\n\n  const [emptyMessageCheck, setEmptyMessageCheck] = useState(false);\n  const [searchKey, setSearchKey] = useState(\"\");\n\n  useEffect(() => {\n    props.dispatch(fetchChatUsersStart({ search_key: searchKey }));\n    let chatSocketUrl = configuration.get(\"configData.chat_socket_url\");\n    if (chatSocketUrl === \"\") {\n      // const notificationMessage = getErrorNotificationMessage(\n      //   \"Socket URL is not configured. Chat wil not work...\"\n      // );\n      // props.dispatch(createNotification(notificationMessage));\n      // window.location.assign(\"/home\");\n    }\n    if (messageRef.current) {\n      messageRef.current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"end\",\n        inline: \"nearest\",\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    console.log(\"Number of times called\");\n    if (\n      props.chatUsers.loading === false &&\n      props.chatUsers.data.users.length > 0\n    ) {\n      console.log(\"Number of times called true  \");\n      setToUserId(props.chatUsers.data.users[0].to_user_id);\n      chatSocketConnect(props.chatUsers.data.users[0].to_user_id);\n    } else {\n    }\n  }, [!props.chatUsers.loading]);\n\n  // Scroll down function..\n  useEffect(() => {\n    console.log(\"Scroll down..\");\n    const objDiv = document.getElementById(\"options-holder\");\n    if (objDiv != null) {\n      let differenceNumber =\n        objDiv.offsetHeight > objDiv.scrollHeight\n          ? objDiv.offsetHeight - objDiv.scrollHeight\n          : objDiv.scrollHeight - objDiv.offsetHeight;\n\n      if (differenceNumber > 280) {\n        objDiv.scrollTop = objDiv.scrollHeight;\n      } else {\n        objDiv.scrollTop = initialHeight;\n        setInitialHeight(initialHeight + 20);\n      }\n    }\n  }, [props.chatMessages.data.messages]);\n\n  const chatSocketConnect = (to_user_id) => {\n    // check the socket url is configured\n    let chatSocketUrl = configuration.get(\"configData.chat_socket_url\");\n    console.log(\"chatSocket\", chatSocketUrl);\n    console.log(\"Input ID\", to_user_id);\n    if (chatSocketUrl) {\n      chatSocket = io(chatSocketUrl, {\n        query:\n          `commonid:'user_id_` +\n          localStorage.getItem(\"userId\") +\n          `_to_user_id_` +\n          to_user_id +\n          `',myid:` +\n          localStorage.getItem(\"userId\"),\n      });\n      console.log(\"chatSocket\", chatSocket);\n      chatSocket.emit(\"update sender\", {\n        commonid:\n          \"user_id_\" +\n          localStorage.getItem(\"userId\") +\n          \"_to_user_id_\" +\n          to_user_id,\n        myid: localStorage.getItem(\"userId\"),\n      });\n      let chatContent;\n      chatSocket.on(\"message\", (newData) => {\n        let content = [];\n        content.push(newData);\n        // chatContent = [...this.state.chatData, ...content];\n        // this.setState({ chatData: chatContent });\n        console.log(content);\n        props.dispatch(addMessageContent(content));\n      });\n    }\n  };\n\n  const changeUser = (event, chat, index) => {\n    chatSocket.disconnect();\n    if (isMobile) {\n      window.location.assign(\n        \"/user-chat-room/\" + chat.from_user_id + \"/\" + chat.to_user_id\n      );\n    }\n    event.preventDefault();\n    setActiveChat(index);\n    let to_user_id =\n      chat.to_user_id == localStorage.getItem(\"userId\")\n        ? chat.from_user_id\n        : chat.to_user_id;\n    setToUserId(to_user_id);\n\n    props.dispatch(\n      fetchChatMessageStart({\n        to_user_id: chat.to_user_id,\n        from_user_id: chat.from_user_id,\n      })\n    );\n    chatSocketConnect(to_user_id);\n  };\n\n  const handleChatSubmit = (event) => {\n    event.preventDefault();\n    let chatSocketUrl = configuration.get(\"configData.chat_socket_url\");\n\n    if (inputMessage.length == 0) {\n      setEmptyMessageCheck(true);\n    }\n\n    if (chatSocketUrl != undefined && inputMessage) {\n      let chatData = [\n        {\n          from_user_id: localStorage.getItem(\"userId\"),\n          to_user_id: toUserId,\n          message: inputMessage,\n          type: \"uu\",\n          user_picture: localStorage.getItem(\"user_picture\"),\n          loggedin_user_id: localStorage.getItem(\"userId\"),\n          created: Date(),\n          from_username: localStorage.getItem(\"username\"),\n          from_displayname: localStorage.getItem(\"name\"),\n          from_userpicture: localStorage.getItem(\"user_picture\"),\n          from_user_unique_id: \"\",\n          to_username: \"\",\n          to_displayname: \"\",\n          to_userpicture: \"\",\n          to_user_unique_id: \"\",\n        },\n      ];\n      chatSocket.emit(\"message\", chatData[0]);\n      let messages;\n      if (props.chatMessages.data.messages != null) {\n        messages = [...props.chatMessages.data.messages, ...chatData];\n      } else {\n        messages = [...chatData];\n      }\n\n      setInputMessage(\"\");\n      props.dispatch(addMessageContent(chatData));\n    }\n  };\n\n  useEffect(() => {\n    props.assetUpload.loading || handleMediaSubmit();\n  }, [props.assetUpload.loading]);\n\n  const handleMediaSubmit = () => {\n    const assetData = props.assetUpload.data.chat_asset;\n    const assetMessage = props.assetUpload.data.chat_message;\n    let chatSocketUrl = configuration.get(\"configData.chat_socket_url\");\n    if (chatSocketUrl != undefined && assetData && assetMessage) {\n      let chatData = [\n        {\n          from_user_id: localStorage.getItem(\"userId\"),\n          to_user_id: toUserId,\n          chat_message_id: assetMessage ? assetMessage.chat_message_id : \"\",\n          message: assetMessage ? assetMessage.message : \"\",\n          type: \"uu\",\n          user_picture: localStorage.getItem(\"user_picture\"),\n          loggedin_user_id: localStorage.getItem(\"userId\"),\n          created: Date(),\n          from_username: localStorage.getItem(\"username\"),\n          from_displayname: localStorage.getItem(\"name\"),\n          from_userpicture: localStorage.getItem(\"user_picture\"),\n          from_user_unique_id: \"\",\n          to_username: \"\",\n          to_displayname: \"\",\n          to_userpicture: \"\",\n          to_user_unique_id: \"\",\n          chat_asset_id: assetData ? assetData.chat_asset_id : \"\",\n          chat_asset_url:\n            assetMessage.amount > 0 ? assetData.blur_file : assetData.file,\n          file_type: assetData.file_type,\n          is_user_needs_pay: assetMessage.amount > 0 ? 1 : 0,\n          amount: assetMessage.amount > 0 ? assetMessage.amount : 0,\n          amount_formatted:\n            assetMessage.amount > 0 ? assetMessage.amount_formatted : 0,\n          payment_text:\n            assetMessage.amount > 0\n              ? \"UNLOCK MESSAGE FOR \" + assetMessage.amount_formatted\n              : \"\",\n        },\n      ];\n\n      let chatMessageData = [\n        {\n          from_user_id: localStorage.getItem(\"userId\"),\n          to_user_id: toUserId,\n          chat_message_id: assetMessage ? assetMessage.chat_message_id : \"\",\n          message: assetMessage ? assetMessage.message : \"\",\n          type: \"uu\",\n          user_picture: localStorage.getItem(\"user_picture\"),\n          loggedin_user_id: localStorage.getItem(\"userId\"),\n          created: Date(),\n          from_username: localStorage.getItem(\"username\"),\n          from_displayname: localStorage.getItem(\"name\"),\n          from_userpicture: localStorage.getItem(\"user_picture\"),\n          from_user_unique_id: \"\",\n          to_username: \"\",\n          to_displayname: \"\",\n          to_userpicture: \"\",\n          to_user_unique_id: \"\",\n          chat_asset_id: assetData ? assetData.chat_asset_id : \"\",\n          chat_asset_url: assetData.file,\n          file_type: assetData.file_type,\n          amount: assetMessage.amount > 0 ? assetMessage.amount : 0,\n          amount_formatted:\n            assetMessage.amount > 0 ? assetMessage.amount_formatted : 0,\n          is_user_needs_pay: 0,\n          payment_text: \"\",\n        },\n      ];\n      chatSocket.emit(\"message\", chatData[0]);\n      let messages;\n      if (props.chatMessages.data.messages != null) {\n        messages = [...props.chatMessages.data.messages, ...chatMessageData];\n      } else {\n        messages = [...chatMessageData];\n      }\n      if (assetData) {\n        closeChatAssetUploadModal();\n      }\n      setInputMessage(\"\");\n      props.dispatch(addMessageContent(chatMessageData));\n    }\n  };\n\n  const chatInputChange = (value) => {\n    setInputMessage(value);\n    if (inputMessage.length > 0) {\n      setEmptyMessageCheck(false);\n    }\n  };\n\n  const handleAssetUploadModal = (fileType) => {\n    setChatAssetUpload(true);\n    setFileType(fileType);\n  };\n\n  const handleAssetPayment = (\n    event,\n    chat_message_id,\n    amount_formatted,\n    amount\n  ) => {\n    event.preventDefault();\n    setPaymentData({\n      ...paymentData,\n      chat_message_id: chat_message_id,\n      amount: amount,\n      amount_formatted: amount_formatted,\n    });\n    setPaymentModal(true);\n  };\n  const closePaymentModal = () => {\n    setPaymentModal(false);\n  };\n\n  function triggerPicker(event) {\n    event.preventDefault();\n    SetEmojiPicker(!emojiPickerState);\n  }\n\n  const handleEmojiSelect = (emoji) => {\n    SetEmojiPicker(false);\n    setInputMessage(inputMessage + emoji.native);\n  };\n\n  const handleBlockUser = (event, status, user_id) => {\n    event.preventDefault();\n    props.dispatch(\n      saveBlockUserStart({\n        user_id: user_id,\n        is_other_profile: 1,\n      })\n    );\n  };\n\n  const searchUser = (value) => {\n    setSearchKey(value);\n    props.dispatch(fetchChatUsersStart({ search_key: value }));\n  };\n\n  return (\n    <>\n      <div className=\"user-chat-sec\">\n        <Container>\n          <Row>\n            <Col sm=\"12\" md=\"12\">\n              <div className=\"user-chat-box\">\n                <div className=\"user-chat-list-sec\">\n                  <div className=\"user-chat-list-header\">\n                    <Link to={`/home`}>\n                      <div className=\"back-icon\">\n                        <i className=\"fas fa-chevron-left\"></i>\n                      </div>\n                    </Link>\n                    <h3>{t(\"chat\")}</h3>\n                  </div>\n                  <div className=\"chat-list-search-sec\">\n                    <InputGroup>\n                      <FormControl\n                        placeholder={t(\"search_by_username\")}\n                        aria-label={t(\"search_by_username\")}\n                        aria-describedby=\"basic-addon2\"\n                        onChange={(event) => searchUser(event.target.value)}\n                        value={searchKey}\n                      />\n                      <InputGroup.Text id=\"basic-addon2\">\n                        <i className=\"fas fa-search\"></i>\n                      </InputGroup.Text>\n                    </InputGroup>\n                  </div>\n                  <div className=\"chat-list-collapse-body\">\n                    {props.chatUsers.loading ? null : props.chatUsers.data &&\n                      props.chatUsers.data.users.length > 0 ? (\n                      <ChatUserList\n                        chatUsers={props.chatUsers.data}\n                        activeChat={activeChat}\n                        setActiveChat={setActiveChat}\n                        changeUser={changeUser}\n                      />\n                    ) : (\n                      <div className=\"user-list-card active\">\n                        <div className=\"user-list-body\">\n                          <div className=\"user-list-info\">\n                            <h6>{t(\"no_user_found\")}</h6>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                {props.chatUsers.loading || props.chatMessages.loading ? (\n                  \"\"\n                ) : props.chatMessages.data.user &&\n                  props.chatMessages.data.user.user_unique_id ? (\n                  <div className=\"user-chat-room-sec mobile-display-none\">\n                    <div className=\"user-chat-room-header\">\n                      <Link\n                        to={`/` + props.chatMessages.data.user.user_unique_id}\n                        className=\"user-chat-msg\"\n                      >\n                        <h3>\n                          {props.chatMessages.data.user.name}{\" \"}\n                          {props.chatMessages.data.user.is_verified_badge ==\n                          1 ? (\n                            <VerifiedBadgeNoShadow />\n                          ) : null}\n                          {props.chatMessages.data.user.is_online_status ==\n                          1 ? (\n                            <span className=\"text-success f-12\">\n                              {\" \"}\n                              ({t(\"online\")})\n                            </span>\n                          ) : (\n                            \"\"\n                          )}\n                        </h3>\n                        <Link to=\"#\" className=\"link-user-name\">\n                          @{props.chatMessages.data.user.name}{\" \"}\n                        </Link>\n                      </Link>\n                      <Dropdown>\n                        <Dropdown.Toggle\n                          className=\"btn btn-default dropdown-toggle\"\n                          type=\"button\"\n                          id=\"dropdown-basic\"\n                        >\n                          {/* <Image\n                            src={\n                              window.location.origin +\n                              \"/assets/images/icons/vertical-dots.svg\"\n                            }\n                            className=\"svg-clone vertical-dots\"\n                          /> */}\n                          <i className=\"fas fa-ellipsis-v svg-clone vertical-dots h-dots\"></i>\n                        </Dropdown.Toggle>\n                        <Dropdown.Menu className=\"dropdown-menu dropdown-menu-right r-dropdown-menu\">\n                          <Media as=\"li\">\n                            <Link\n                              to={\n                                `/` +\n                                props.chatMessages.data.user.user_unique_id\n                              }\n                              className=\"dropdown-a\"\n                            >\n                              View profile\n                            </Link>\n                          </Media>\n                          <Media as=\"li\" className=\"divider\"></Media>\n                          {props.chatMessages.data.is_block_user == 1 && (\n                            <Media as=\"li\">\n                              <Link\n                                to=\"#\"\n                                className=\"dropdown-a\"\n                                onClick={(event) =>\n                                  handleBlockUser(\n                                    event,\n                                    \"unblocked\",\n                                    props.chatMessages.data.user.user_id\n                                  )\n                                }\n                              >\n                                UnBlock\n                              </Link>\n                            </Media>\n                          )}\n                          <></>\n                        </Dropdown.Menu>\n                      </Dropdown>\n                    </div>\n                    <div className=\"user-chat-main-wrapper-body\">\n                      <div\n                        className=\"user-message-content-sec\"\n                        ref={messageRef}\n                      >\n                        {props.chatMessages.data.messages.length > 0\n                          ? props.chatMessages.data.messages.map(\n                              (chatMessage, index) => (\n                                <>\n                                  {chatMessage.from_user_id ==\n                                  localStorage.getItem(\"userId\") ? (\n                                    <div className=\"user-message-right-align\">\n                                      <div className=\"user-message-user-img-sec\">\n                                        <Image\n                                          src={localStorage.getItem(\n                                            \"user_picture\"\n                                          )}\n                                          alt=\"\"\n                                          className=\"user-message-img\"\n                                        />\n                                      </div>\n                                      <div className=\"user-message-info\">\n                                        {chatMessage.chat_asset_url &&\n                                        chatMessage.file_type == \"video\" ? (\n                                          <ReactPlayer\n                                            url={chatMessage.chat_asset_url}\n                                            controls={true}\n                                            className=\"post-video-size chat-video\"\n                                            width=\"450px\"\n                                            height=\"450px\"\n                                          />\n                                        ) : (\n                                          \"\"\n                                        )}\n                                        {chatMessage.chat_asset_url &&\n                                        chatMessage.file_type == \"audio\" ? (\n                                          <ReactAudioPlayer\n                                            src={chatMessage.chat_asset_url}\n                                            controls={true}\n                                            width=\"450px\"\n                                            height=\"450px\"\n                                            className=\"chat-room-audio-display\"\n                                            autoPlay={false}\n                                            controlsList={\"nodownload\"}\n                                          />\n                                        ) : (\n                                          // <ReactPlayer\n                                          //   url={chatMessage.chat_asset_url}\n                                          //   controls={true}\n                                          //   width=\"450px\"\n                                          //   height=\"450px\"\n                                          //   className=\"chat-room-audio-display\"\n                                          // />\n                                          \"\"\n                                        )}\n                                        <div>\n                                          {chatMessage.chat_asset_url &&\n                                          chatMessage.file_type == \"image\" ? (\n                                            <ReactFancyBox\n                                              image={chatMessage.chat_asset_url}\n                                              className=\"chat-view-image\"\n                                            />\n                                          ) : (\n                                            \"\"\n                                          )}\n\n                                          {chatMessage.is_user_needs_pay ===\n                                          1 ? (\n                                            <div className=\"gallery-top-btn-sec\">\n                                              <Button\n                                                className=\"subscribe-post-btn-sec\"\n                                                onClick={(event) =>\n                                                  handleAssetPayment(\n                                                    event,\n                                                    chatMessage.chat_message_id,\n                                                    chatMessage.amount,\n                                                    chatMessage.amount_formatted\n                                                  )\n                                                }\n                                              >\n                                                {chatMessage.payment_text}\n                                              </Button>\n                                            </div>\n                                          ) : (\n                                            \"\"\n                                          )}\n                                        </div>\n                                        {chatMessage.message == \"\" ? null : (\n                                          <>\n                                            <p>You, {chatMessage.created}</p>\n                                            <h6>{chatMessage.message}</h6>\n                                          </>\n                                        )}\n                                      </div>\n                                    </div>\n                                  ) : (\n                                    <div className=\"user-message-left-align\">\n                                      <div className=\"user-message-user-img-sec\">\n                                        <Image\n                                          src={\n                                            props.chatMessages.data.user.picture\n                                          }\n                                          alt=\"\"\n                                          className=\"user-message-img\"\n                                        />\n                                      </div>\n                                      <div className=\"user-message-info\">\n                                        {chatMessage.chat_asset_url &&\n                                        chatMessage.file_type == \"video\" ? (\n                                          chatMessage.is_user_needs_pay ===\n                                          1 ? (\n                                            <Image\n                                              src={chatMessage.chat_asset_url}\n                                              className=\"chat-view-image\"\n                                            ></Image>\n                                          ) : (\n                                            <ReactPlayer\n                                              url={chatMessage.chat_asset_url}\n                                              controls={true}\n                                              className=\"post-video-size chat-room-video-display chat-video\"\n                                              width=\"450px\"\n                                              height=\"450px\"\n                                            />\n                                          )\n                                        ) : (\n                                          \"\"\n                                        )}\n                                        <div>\n                                          {chatMessage.chat_asset_url &&\n                                          chatMessage.file_type == \"image\" ? (\n                                            <Image\n                                              src={chatMessage.chat_asset_url}\n                                              className=\"chat-view-image\"\n                                              // onClick={(event) =>\n                                              //   handleImagePreview(event, 1)\n                                              // }\n                                            />\n                                          ) : (\n                                            \"\"\n                                          )}\n                                          {chatMessage.chat_asset_url &&\n                                          chatMessage.file_type == \"audio\" ? (\n                                            chatMessage.is_user_needs_pay ===\n                                            1 ? (\n                                              <Image\n                                                src={chatMessage.chat_asset_url}\n                                                className=\"chat-view-image\"\n                                              ></Image>\n                                            ) : (\n                                              <ReactAudioPlayer\n                                                src={chatMessage.chat_asset_url}\n                                                controls={true}\n                                                width=\"450px\"\n                                                height=\"450px\"\n                                                className=\"chat-room-audio-display\"\n                                                autoPlay={false}\n                                                controlsList={\"nodownload\"}\n                                              />\n                                              // <ReactPlayer\n                                              //   url={chatMessage.chat_asset_url}\n                                              //   controls={true}\n                                              //   width=\"450px\"\n                                              //   height=\"450px\"\n                                              //   className=\"chat-room-audio-display\"\n                                              // />\n                                            )\n                                          ) : (\n                                            \"\"\n                                          )}\n\n                                          {chatMessage.is_user_needs_pay ===\n                                          1 ? (\n                                            <div className=\"gallery-top-btn-sec chat-room-pay-display\">\n                                              <Button\n                                                className=\"subscribe-post-btn-sec\"\n                                                onClick={(event) =>\n                                                  handleAssetPayment(\n                                                    event,\n                                                    chatMessage.chat_message_id,\n                                                    chatMessage.amount,\n                                                    chatMessage.amount_formatted\n                                                  )\n                                                }\n                                              >\n                                                {chatMessage.payment_text}\n                                              </Button>\n                                            </div>\n                                          ) : (\n                                            \"\"\n                                          )}\n                                        </div>\n                                        {chatMessage.message == \"\" ? null : (\n                                          <>\n                                            <p>\n                                              {\n                                                props.chatMessages.data.user\n                                                  .name\n                                              }\n                                              , {chatMessage.created}\n                                            </p>\n                                            <h6>{chatMessage.message}</h6>\n                                          </>\n                                        )}\n                                      </div>\n                                    </div>\n                                  )}{\" \"}\n                                </>\n                              )\n                            )\n                          : \"\"}\n                      </div>\n                      {/* <p className=\"typing-text mt-5\">Jason Doyle is typing...</p> */}\n                    </div>\n                    <div className=\"user-chat-main-wrapper-footer\">\n                      <Form\n                        id=\"chat_post_form\"\n                        className=\"has-advanced-upload\"\n                        onSubmit={handleChatSubmit}\n                      >\n                        <InputGroup hasValidation>\n                          <FormControl\n                            placeholder=\"Type a message\"\n                            aria-label=\"Type a message\"\n                            aria-describedby=\"basic-addon2\"\n                            value={inputMessage}\n                            onChange={(event) => {\n                              chatInputChange(event.currentTarget.value);\n                            }}\n                          />\n                          <div className=\"chat-icon-sec\">\n                          {configuration.get(\n                            \"configData.is_chat_asset_enabled\"\n                          ) == 1 ? (\n                            <>\n                              <InputGroup.Append>\n                                <InputGroup.Text id=\"basic-addon2\" className=\"chat-border-needed border-radius-zero\">\n                                  <Button\n                                    type=\"button\"\n                                    data-can_send=\"true\"\n                                    className=\"g-btn m-rounded b-chat__btn-submit\"\n                                    onClick={() =>\n                                      handleAssetUploadModal(\"image\")\n                                    }\n                                  >\n                                    <Image\n                                      src={\n                                        window.location.origin +\n                                        \"/assets/images/icons/picture.svg\"\n                                      }\n                                      className=\"svg-clone  wh-32\"\n                                    />\n                                  </Button>\n                                </InputGroup.Text>\n                              </InputGroup.Append>\n                              <InputGroup.Append>\n                                <InputGroup.Text id=\"basic-addon2\" className=\"border-radius-zero\">\n                                  <Button\n                                    type=\"button\"\n                                    data-can_send=\"true\"\n                                    className=\"g-btn m-rounded b-chat__btn-submit\"\n                                    onClick={() =>\n                                      handleAssetUploadModal(\"video\")\n                                    }\n                                  >\n                                    <Image\n                                      src={\n                                        window.location.origin +\n                                        \"/assets/images/icons/movie.svg\"\n                                      }\n                                      className=\"svg-clone  wh-32\"\n                                    />\n                                  </Button>\n                                </InputGroup.Text>\n                              </InputGroup.Append>\n                              <InputGroup.Append>\n                                <InputGroup.Text id=\"basic-addon2\" className=\"chat-border-zero\">\n                                  <Button\n                                    type=\"button\"\n                                    data-can_send=\"true\"\n                                    className=\"g-btn m-rounded b-chat__btn-submit\"\n                                    onClick={() =>\n                                      handleAssetUploadModal(\"audio\")\n                                    }\n                                  >\n                                    <Image\n                                      src={\n                                        window.location.origin +\n                                        \"/assets/images/icons/audio.png\"\n                                      }\n                                      className=\"svg-clone  wh-32\"\n                                    />\n                                  </Button>\n                                </InputGroup.Text>\n                              </InputGroup.Append>\n                            </>\n                          ) : (\n                            \"\"\n                          )}\n                          <InputGroup.Append>\n                          <InputGroup.Text\n                            id=\"basic-addon2\"\n                            className=\"position-relative last-child-mobile-icon chat-border-zero\"\n                          >\n                            <Button\n                              type=\"button\"\n                              className=\"space-between-evenly\"\n                              data-can_send=\"true\"\n                              onClick={handleChatSubmit}\n                              ref={invalidMessageRef}\n                            >\n                              {/* <i className=\"far fa-paper-plane\"></i> */}\n                              <Image\n                                className=\"comment-send-icon\"\n                                src={\n                                  window.location.origin +\n                                  \"/assets/images/icons/comment-send-icon.png\"\n                                }\n                              />\n                            </Button>\n                            </InputGroup.Text>\n                            </InputGroup.Append>\n                            <InputGroup.Append>\n                            <InputGroup.Text>\n                            <Overlay\n                              target={invalidMessageRef}\n                              show={emptyMessageCheck}\n                              placement=\"top\"\n                            >\n                              {(props) => (\n                                <Tooltip id=\"chat-invalid\" {...props}>\n                                  Please type a message\n                                </Tooltip>\n                              )}\n                            </Overlay>\n                            <Button\n                              className=\"ml-2\"\n                              type=\"button\"\n                              onClick={triggerPicker}\n                            >\n                              <i className=\"far fa-smile\"></i>\n                            </Button>\n                            </InputGroup.Text>\n                          </InputGroup.Append>\n                        </div>\n                        </InputGroup>\n                      </Form>\n                    </div>\n                    {emojiPickerState && (\n                      <div className=\"emojiWrapper chat-emoji\">\n                        <Picker\n                          title=\"\"\n                          emoji=\"point_up\"\n                          onSelect={(emoji) => handleEmojiSelect(emoji)}\n                        />\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <InboxNoDataFound />\n                )}\n              </div>\n            </Col>\n          </Row>\n        </Container>\n        <ChatAssetModal\n          chatAssetUpload={chatAssetUpload}\n          closeChatAssetUploadModal={closeChatAssetUploadModal}\n          fileType={fileType}\n          toUserId={toUserId}\n        />\n        {props.chatMessages.loading ? (\n          t(\"loading\")\n        ) : (\n          <AssetPaymentModal\n            chatPayment={chatPayment}\n            closePaymentModal={closePaymentModal}\n            paymentData={paymentData}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  chatUsers: state.chat.chatUsers,\n  chatMessages: state.chat.messages,\n  assetUpload: state.chatAsset.saveAssetUpload,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(UserChatIndex));\n"]},"metadata":{},"sourceType":"module"}