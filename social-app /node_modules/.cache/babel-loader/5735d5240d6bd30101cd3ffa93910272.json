{"ast":null,"code":"var _jsxFileName = \"/Users/devsmac/Downloads/fx-frontend/src/components/Ecom/Product/ProductGallery.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Container, Row, Col, Button, Form, Image, Media } from \"react-bootstrap\";\nimport \"./Product.css\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport ProductHeader from \"./ProductHeader\";\nimport { fetchUserProductPicturesStart, userProductPicturesSaveStart, userProductPicturesDeleteStart } from \"../../../store/actions/ProductsAction\";\nimport NoDataFound from \"../../NoDataFound/NoDataFound\";\n\nconst ProductGallery = props => {\n  const {\n    id\n  } = useParams();\n  const [galleryImages, setGalleryImages] = useState(null);\n  const [skipInitialRender, setSkipInitialRender] = useState(false);\n\n  const handleChange = event => {\n    const fileReader = new FileReader();\n    let file = event.currentTarget.files[0];\n\n    fileReader.onloadend = () => {\n      setGalleryImages({ ...galleryImages,\n        picture: file,\n        previewImage: fileReader.result\n      });\n    };\n\n    if (file) {\n      fileReader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    props.dispatch(userProductPicturesSaveStart({\n      user_product_id: id,\n      picture: galleryImages.picture\n    }));\n  };\n\n  useEffect(() => {\n    props.dispatch(fetchUserProductPicturesStart({\n      user_product_id: id\n    }));\n    setSkipInitialRender(true);\n  }, []);\n  useEffect(() => {\n    if (!props.productPicturesSave.loading && skipInitialRender) {\n      setGalleryImages(null);\n      props.dispatch(fetchUserProductPicturesStart({\n        user_product_id: id\n      }));\n    }\n  }, [props.productPicturesSave.data]);\n\n  const deleteGalleryImage = id => {\n    props.dispatch(userProductPicturesDeleteStart({\n      user_product_picture_id: id\n    }));\n  };\n\n  useEffect(() => {\n    if (!props.productPicturesDelete.loading && skipInitialRender) {\n      props.dispatch(fetchUserProductPicturesStart({\n        user_product_id: id\n      }));\n    }\n  }, [props.productPicturesDelete.data]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-product-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ecom-navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProductHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, t(\"add_product\")), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: event => handleSubmit(event),\n    className: \"add-product-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-product-upload-file-sec border-right-divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, t(\"select_image\")), /*#__PURE__*/React.createElement(Form.Group, {\n    id: \"file-upload-form\",\n    className: \"uploader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.File, {\n    id: \"file-upload\",\n    name: \"picture\",\n    accept: \"image/*\",\n    onChange: event => {\n      handleChange(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"file-upload\",\n    id: \"file-drag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-download\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, t(\"select_a_image\"))))), galleryImages != null && galleryImages.previewImage && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: galleryImages.previewImage,\n    className: \"gallery-preview-image\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    className: \"add-product-btn\",\n    disabled: props.productPicturesSave.buttonDisable ? true : galleryImages != null ? false : true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, props.productPicturesSave.loadingButtonContent != null ? props.productPicturesSave.loadingButtonContent : `${t(\"submit\")}`)))), /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, props.productPictures.loading ? \"Loading...\" : props.productPictures.data.user_product_pictures.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-gallery-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, props.productPictures.data.user_product_pictures.map((image, index) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-wrapper\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: image.picture,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"gallery-delete text-danger\",\n    onClick: () => deleteGalleryImage(image.user_product_picture_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  })))))))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(NoDataFound, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }))))))));\n};\n\nconst mapStateToPros = state => ({\n  productPictures: state.userProducts.productPictures,\n  productPicturesSave: state.userProducts.productPicturesSave,\n  productPicturesDelete: state.userProducts.productPicturesDelete\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch\n  };\n}\n\nexport default connect(mapStateToPros, mapDispatchToProps)(translate(ProductGallery));","map":{"version":3,"sources":["/Users/devsmac/Downloads/fx-frontend/src/components/Ecom/Product/ProductGallery.jsx"],"names":["React","useState","useEffect","Modal","Container","Row","Col","Button","Form","Image","Media","Link","useParams","connect","translate","t","ProductHeader","fetchUserProductPicturesStart","userProductPicturesSaveStart","userProductPicturesDeleteStart","NoDataFound","ProductGallery","props","id","galleryImages","setGalleryImages","skipInitialRender","setSkipInitialRender","handleChange","event","fileReader","FileReader","file","currentTarget","files","onloadend","picture","previewImage","result","readAsDataURL","handleSubmit","preventDefault","dispatch","user_product_id","productPicturesSave","loading","data","deleteGalleryImage","user_product_picture_id","productPicturesDelete","buttonDisable","loadingButtonContent","productPictures","user_product_pictures","length","map","image","index","mapStateToPros","state","userProducts","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Modal,\n  Container,\n  Row,\n  Col,\n  Button,\n  Form,\n  Image,\n  Media,\n} from \"react-bootstrap\";\nimport \"./Product.css\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport ProductHeader from \"./ProductHeader\";\nimport {\n  fetchUserProductPicturesStart,\n  userProductPicturesSaveStart,\n  userProductPicturesDeleteStart\n} from \"../../../store/actions/ProductsAction\";\nimport NoDataFound from \"../../NoDataFound/NoDataFound\";\n\nconst ProductGallery = (props) => {\n  const { id } = useParams();\n\n  const [galleryImages, setGalleryImages] = useState(null);\n\n  const [skipInitialRender, setSkipInitialRender] = useState(false);\n\n  const handleChange = (event) => {\n    const fileReader = new FileReader();\n\n    let file = event.currentTarget.files[0];\n\n    fileReader.onloadend = () => {\n      setGalleryImages({\n        ...galleryImages,\n        picture: file,\n        previewImage: fileReader.result,\n      });\n    };\n    if (file) {\n      fileReader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    props.dispatch(\n      userProductPicturesSaveStart({\n        user_product_id: id,\n        picture: galleryImages.picture,\n      })\n    );\n  };\n\n  useEffect(() => {\n    props.dispatch(fetchUserProductPicturesStart({ user_product_id: id }));\n    setSkipInitialRender(true)\n  }, []);\n\n  useEffect(() => {\n    if (!props.productPicturesSave.loading && skipInitialRender) {\n      setGalleryImages(null);\n      props.dispatch(fetchUserProductPicturesStart({ user_product_id: id }));\n    }\n  }, [props.productPicturesSave.data]);\n\n  const deleteGalleryImage = (id) => {\n    props.dispatch(userProductPicturesDeleteStart({user_product_picture_id : id}))\n  }\n\n  useEffect(() => {\n    if (!props.productPicturesDelete.loading && skipInitialRender) {\n      props.dispatch(fetchUserProductPicturesStart({ user_product_id: id }));\n    }\n  }, [props.productPicturesDelete.data]);\n\n  return (\n    <>\n      <div className=\"add-product-sec\">\n        <Container>\n          <div className=\"ecom-navbar\">\n            <ProductHeader />\n          </div>\n          <h2>{t(\"add_product\")}</h2>\n          <Form\n            onSubmit={(event) => handleSubmit(event)}\n            className=\"add-product-form\"\n          >\n            <Row>\n              <Col md={6}>\n                <div className=\"add-product-upload-file-sec border-right-divider\">\n                  <Form.Label>{t(\"select_image\")}</Form.Label>\n                  <Form.Group id=\"file-upload-form\" className=\"uploader\">\n                    <Form.File\n                      id=\"file-upload\"\n                      name=\"picture\"\n                      accept=\"image/*\"\n                      onChange={(event) => {\n                        handleChange(event);\n                      }}\n                    />\n                    <label for=\"file-upload\" id=\"file-drag\">\n                      <div id=\"start\">\n                        <i className=\"fa fa-download\" aria-hidden=\"true\"></i>\n                        <div>{t(\"select_a_image\")}</div>\n                      </div>\n                    </label>\n                  </Form.Group>\n                  {galleryImages != null && galleryImages.previewImage && (\n                    <div>\n                      <img\n                        src={galleryImages.previewImage}\n                        className=\"gallery-preview-image\"\n                        alt=\"\"\n                      />\n                    </div>\n                  )}\n                  <div className=\"text-center\">\n                    <Button\n                      type=\"submit\"\n                      className=\"add-product-btn\"\n                      disabled={\n                        props.productPicturesSave.buttonDisable\n                          ? true\n                          : galleryImages != null\n                          ? false\n                          : true\n                      }\n                    >\n                      {props.productPicturesSave.loadingButtonContent != null\n                        ? props.productPicturesSave.loadingButtonContent\n                        : `${t(\"submit\")}`}\n                    </Button>\n                  </div>\n                </div>\n              </Col>\n              <Col md={6}>\n                {props.productPictures.loading ? (\n                  \"Loading...\"\n                ) : props.productPictures.data.user_product_pictures.length >\n                  0 ? (\n                  <>\n                    <div className=\"product-gallery-grid\">\n                      {props.productPictures.data.user_product_pictures.map(\n                        (image, index) => (\n                          <>\n                            <div className=\"image-wrapper\" key={index}>\n                              <img src={image.picture} alt=\"\" />\n                              <Button\n                                type=\"button\"\n                                className=\"gallery-delete text-danger\"\n                                onClick={() => deleteGalleryImage(image.user_product_picture_id)}\n                              >\n                                <span>\n                                <i className=\"fas fa-trash\"></i>\n                                </span>\n                              </Button>\n                            </div>\n                          </>\n                        )\n                      )}\n                    </div>\n                  </>\n                ) : (\n                  <div>\n                    <NoDataFound></NoDataFound>\n                  </div>\n                )}\n              </Col>\n            </Row>\n          </Form>\n        </Container>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  productPictures: state.userProducts.productPictures,\n  productPicturesSave: state.userProducts.productPicturesSave,\n  productPicturesDelete : state.userProducts.productPicturesDelete\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(ProductGallery));\n"]},"metadata":{},"sourceType":"module"}