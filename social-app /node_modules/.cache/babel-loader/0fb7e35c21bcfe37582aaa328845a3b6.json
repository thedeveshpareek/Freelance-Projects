{"ast":null,"code":"import _objectSpread from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/codegama/bhawya/source_code/fx-frontend-base/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{Form,Button,Row,Col,Media}from\"react-bootstrap\";import{translate,t}from\"react-multi-lang\";import{fetchSesssionManagementStart,deleteSingleLoginSessionStart,deleteAllLoginSessionStart}from\"../../../store/actions/SessionManagementAction\";import NoDataFound from\"../../NoDataFound/NoDataFound\";var SessionManagement=function SessionManagement(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),activeDeletId=_useState2[0],setActiveDeletId=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),deletedSessions=_useState4[0],setDeletedSessions=_useState4[1];var _useState5=useState({loading:false,status:false}),_useState6=_slicedToArray(_useState5,2),deleteAllSessions=_useState6[0],setDeleteAllSessions=_useState6[1];useEffect(function(){props.dispatch(fetchSesssionManagementStart());},[]);var handleSingleSessionDelete=function handleSingleSessionDelete(id){setActiveDeletId(id);props.dispatch(deleteSingleLoginSessionStart({user_login_session_id:id}));};useEffect(function(){if(Object.keys(props.sessionDelete.data).length>0){setDeletedSessions([].concat(_toConsumableArray(deletedSessions),[activeDeletId]));setActiveDeletId(null);if(deleteAllSessions.loading){setDeleteAllSessions({loading:false,status:true});}}},[props.sessionDelete.data]);var handleSessionDeleteAll=function handleSessionDeleteAll(){setDeleteAllSessions(_objectSpread(_objectSpread({},deleteAllSessions),{},{loading:true}));props.dispatch(deleteAllLoginSessionStart());};return/*#__PURE__*/React.createElement(React.Fragment,null,props.sessionsList.loading?null:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{role:\"session-management\",className:props.activeSec===\"session-management\"?\"tab-pane fade in active\":\"tab-pane fade\",id:\"session-management\"},/*#__PURE__*/React.createElement(\"div\",{className:\"change-password-sec\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header bg-transparent\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"session_management\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:12,md:12},props.sessionsList.data.total>0&&!deleteAllSessions.status?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"close-all-session-sec\"},/*#__PURE__*/React.createElement(\"button\",{className:\"close-all-session-btn\",disabled:deleteAllSessions.loading,onClick:function onClick(){return handleSessionDeleteAll();}},props.sessionDelete.loadingButtonContent!=null&&deleteAllSessions.loading?props.sessionDelete.loadingButtonContent:\"\".concat(t(\"close_all_sessions\")))))),props.sessionsList.data.session.filter(function(sessions){return!deletedSessions.includes(sessions.user_login_session_id);}).map(function(sessions){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"session-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"session-left-sec\"},/*#__PURE__*/React.createElement(\"h4\",null,sessions.device_model,\",\",\" \",sessions.device_type),/*#__PURE__*/React.createElement(\"ul\",{className:\"session-list-info list-unstyled\"},/*#__PURE__*/React.createElement(Media,{as:\"li\"},sessions.ip_address)),sessions.is_current_session==1&&/*#__PURE__*/React.createElement(\"h6\",{className:\"active-session\"},\"Active\")),/*#__PURE__*/React.createElement(\"div\",{className:\"session-right-sec\"},/*#__PURE__*/React.createElement(\"p\",null,sessions.last_session),/*#__PURE__*/React.createElement(\"button\",{className:\"logout-btn\",disabled:activeDeletId===sessions.user_login_session_id,onClick:function onClick(){return handleSingleSessionDelete(sessions.user_login_session_id);}},props.sessionDelete.loadingButtonContent!=null&&activeDeletId===sessions.user_login_session_id?props.sessionDelete.loadingButtonContent:\"\".concat(t(\"logout\"))))));})):/*#__PURE__*/React.createElement(NoDataFound,null))))))));};var mapStateToPros=function mapStateToPros(state){return{sessionsList:state.sessions.sessionList,sessionDelete:state.sessions.sessionDelete};};function mapDispatchToProps(dispatch){return{dispatch:dispatch};}export default connect(mapStateToPros,mapDispatchToProps)(translate(SessionManagement));","map":{"version":3,"sources":["/home/codegama/bhawya/source_code/fx-frontend-base/src/components/Accounts/Profile/SessionManagement.jsx"],"names":["React","useState","useEffect","Link","connect","Form","Button","Row","Col","Media","translate","t","fetchSesssionManagementStart","deleteSingleLoginSessionStart","deleteAllLoginSessionStart","NoDataFound","SessionManagement","props","activeDeletId","setActiveDeletId","deletedSessions","setDeletedSessions","loading","status","deleteAllSessions","setDeleteAllSessions","dispatch","handleSingleSessionDelete","id","user_login_session_id","Object","keys","sessionDelete","data","length","handleSessionDeleteAll","sessionsList","activeSec","total","loadingButtonContent","session","filter","sessions","includes","map","device_model","device_type","ip_address","is_current_session","last_session","mapStateToPros","state","sessionList","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Form, Button, Row, Col, Media } from \"react-bootstrap\";\nimport { translate, t } from \"react-multi-lang\";\nimport {\n  fetchSesssionManagementStart,\n  deleteSingleLoginSessionStart,\n  deleteAllLoginSessionStart,\n} from \"../../../store/actions/SessionManagementAction\";\nimport NoDataFound from \"../../NoDataFound/NoDataFound\";\n\nconst SessionManagement = (props) => {\n  const [activeDeletId, setActiveDeletId] = useState(null);\n\n  const [deletedSessions, setDeletedSessions] = useState([]);\n\n  const [deleteAllSessions, setDeleteAllSessions] = useState({\n    loading: false,\n    status: false,\n  });\n\n  useEffect(() => {\n    props.dispatch(fetchSesssionManagementStart());\n  }, []);\n\n  const handleSingleSessionDelete = (id) => {\n    setActiveDeletId(id);\n    props.dispatch(\n      deleteSingleLoginSessionStart({ user_login_session_id: id })\n    );\n  };\n\n  useEffect(() => {\n    if (Object.keys(props.sessionDelete.data).length > 0) {\n      setDeletedSessions([...deletedSessions, activeDeletId]);\n      setActiveDeletId(null);\n      if (deleteAllSessions.loading) {\n        setDeleteAllSessions({\n          loading: false,\n          status: true,\n        });\n      }\n    }\n  }, [props.sessionDelete.data]);\n\n  const handleSessionDeleteAll = () => {\n    setDeleteAllSessions({\n      ...deleteAllSessions,\n      loading: true,\n    });\n    props.dispatch(deleteAllLoginSessionStart());\n  };\n\n  return (\n    <>\n      {props.sessionsList.loading ? null : (\n        <>\n          <div\n            role=\"session-management\"\n            className={\n              props.activeSec === \"session-management\"\n                ? \"tab-pane fade in active\"\n                : \"tab-pane fade\"\n            }\n            id=\"session-management\"\n          >\n            <div className=\"change-password-sec\">\n              <div className=\"card-header bg-transparent\">\n                <h4>{t(\"session_management\")}</h4>\n              </div>\n              <div className=\"card-body\">\n                <Row>\n                  <Col sm={12} md={12}>\n                    {props.sessionsList.data.total > 0 &&\n                    !deleteAllSessions.status ? (\n                      <>\n                        <Row>\n                          <Col md={12}>\n                            <div className=\"close-all-session-sec\">\n                              <button\n                                className=\"close-all-session-btn\"\n                                disabled={deleteAllSessions.loading}\n                                onClick={() => handleSessionDeleteAll()}\n                              >\n                                {props.sessionDelete.loadingButtonContent != null && deleteAllSessions.loading\n                                  ? props.sessionDelete.loadingButtonContent\n                                  : `${t(\"close_all_sessions\")}`}\n                              </button>\n                            </div>\n                          </Col>\n                        </Row>\n                        {props.sessionsList.data.session\n                          .filter(\n                            (sessions) =>\n                              !deletedSessions.includes(\n                                sessions.user_login_session_id\n                              )\n                          )\n                          .map((sessions) => (\n                            <>\n                              <div className=\"session-card\">\n                                <div className=\"session-left-sec\">\n                                  <h4>\n                                    {sessions.device_model},{\" \"}\n                                    {sessions.device_type}\n                                  </h4>\n                                  <ul className=\"session-list-info list-unstyled\">\n                                    <Media as=\"li\">{sessions.ip_address}</Media>\n                                    {/* <Media as=\"li\">India</Media> */}\n                                  </ul>\n                                  {sessions.is_current_session == 1 && (\n                                    <h6 className=\"active-session\">Active</h6>\n                                  )}\n                                </div>\n                                <div className=\"session-right-sec\">\n                                  <p>{sessions.last_session}</p>\n                                  <button\n                                    className=\"logout-btn\"\n                                    disabled={\n                                      activeDeletId ===\n                                      sessions.user_login_session_id\n                                    }\n                                    onClick={() =>\n                                      handleSingleSessionDelete(\n                                        sessions.user_login_session_id\n                                      )\n                                    }\n                                  >\n                                    {props.sessionDelete.loadingButtonContent != null && activeDeletId ===\n                                    sessions.user_login_session_id\n                                      ? props.sessionDelete.loadingButtonContent\n                                      : `${t(\"logout\")}`}\n                                  </button>\n                                </div>\n                              </div>\n                            </>\n                          ))}\n                      </>\n                    ) : (\n                      <NoDataFound></NoDataFound>\n                    )}\n                  </Col>\n                </Row>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  sessionsList: state.sessions.sessionList,\n  sessionDelete: state.sessions.sessionDelete,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(SessionManagement));\n"]},"metadata":{},"sourceType":"module"}